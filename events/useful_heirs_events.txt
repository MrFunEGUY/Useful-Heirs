######################
# Useful Heir Events #
######################

namespace = usefulheirs

# Heir Summoned
country_event = {
	id = usefulheirs.1000
	title = usefulheirs.1000.name
	desc = usefulheirs.1000.desc
	hide_window = no
	is_triggered_only = yes

	diplomatic = yes

	picture_event_data = {
		portrait = event_target:heir_leader
		planet_background = root.capital_scope
		graphical_culture = root.owner
		city_level = root.capital_scope
		room = root.ruler
	}

	# Nevermind
	option = {
		name = usefulheirs.1000.d
	}

	# You need to gain experience within our empire.
	option = {
		name = usefulheirs.1000.a
		custom_tooltip = usefulheirs.1000.a.tooltip
		hidden_effect = { country_event = { id = usefulheirs.2000 } }
	}

	# You are unworthy of being my heir.
	option = {
		trigger	 = { NOT = { has_valid_civic = civic_adoptive_dynasties } }
		name = usefulheirs.1000.b
		custom_tooltip = usefulheirs.1000.b.tooltip
		hidden_effect = { country_event = { id = usefulheirs.3000 } }
	}

	# The time has come to designate an heir.
	option = {
		trigger	 = { has_valid_civic = civic_adoptive_dynasties }
		name = usefulheirs.1000.b.ad
		custom_tooltip = usefulheirs.1000.b.tooltip
		hidden_effect = { country_event = { id = usefulheirs.3000 } }
	}

	# I shall abdicate, and you shall rule.
	option = {
		name = usefulheirs.1000.c
		custom_tooltip = usefulheirs.1000.c.tooltip
		hidden_effect = { country_event = { id = usefulheirs.4000 } }
	}
}

######################


# Pick heir job
country_event = {
	id = usefulheirs.2000
	title = usefulheirs.2000.name
	desc = usefulheirs.2000.desc
	hide_window = no
	is_triggered_only = yes

	diplomatic = yes

	picture_event_data = {
		portrait = event_target:heir_leader
		planet_background = root.capital_scope
		graphical_culture = root.owner
		city_level = root.capital_scope
		room = root.ruler
	}

	# Nevermind
	option = {
		name = usefulheirs.2000.e
		trigger = {
			is_ai = no
		}
	}

	# Governor
	option = {
		name = usefulheirs.2000.a
		trigger = {
			is_ai = no
		}
		hidden_effect = { country_event = { id = usefulheirs.2001 } }
		trigger = {
			event_target:heir_leader = {
				NOT = { has_leader_flag = clone_heir_governor }
			}
		}
	}

	# Admiral
	option = {
		name = usefulheirs.2000.b
		trigger = {
			is_ai = no
		}
		hidden_effect = { country_event = { id = usefulheirs.2002 } }
		trigger = {
			event_target:heir_leader = {
				NOT = { has_leader_flag = clone_heir_admiral }
			}
		}
	}

	# General
	option = {
		name = usefulheirs.2000.c
		trigger = {
			is_ai = no
		}
		hidden_effect = { country_event = { id = usefulheirs.2003 } }
		trigger = {
			event_target:heir_leader = {
				NOT = { has_leader_flag = clone_heir_general }
			}
		}
	}

	# Scientist
	option = {
		name = usefulheirs.2000.d
		trigger = {
			is_ai = no
		}
		hidden_effect = { country_event = { id = usefulheirs.2004 } }
		trigger = {
			event_target:heir_leader = {
				NOT = { has_leader_flag = clone_heir_scientist }
			}
		}
	}

	# AI Option
	option = {
		name = usefulheirs.2000.AI
		trigger = {
			is_ai = yes
		}
		ai_chance = {
			factor = 1
		}
		random_list = {
			# Governor
			40 = {
				hidden_effect = { country_event = { id = usefulheirs.2001 } }
			}
			# Admiral
			40 = {
				hidden_effect = { country_event = { id = usefulheirs.2002 } }
			}
			# General
			15 = {
				hidden_effect = { country_event = { id = usefulheirs.2003 } }
			}
			# Scientist
			5 = {
				hidden_effect = { country_event = { id = usefulheirs.2004 } }
			}
		}
	}
}

# Governor
country_event = {
	id = usefulheirs.2001
	hide_window = yes
	is_triggered_only = yes

	immediate = {

		clone_leader = {
			target = event_target:heir_leader
			class = governor
			traits = { 	trait = random_trait }
			effect = {
				set_leader_flag = clone_heir_governor
				set_leader_flag = clone_heir_base
				save_event_target_as = clone_heir_override
				if = {
					limit = {
						owner = { is_ai = no }
					}
					set_name = "heir_name_bold"
				}
				if = {
					limit = {
						OR = {
							has_trait = leader_trait_strategist
							has_trait = leader_trait_general_strategist
							has_trait = leader_trait_strategist2
							has_trait = leader_trait_general_strategist2
							has_trait = leader_trait_strategist3
							has_trait = leader_trait_general_strategist3
							has_trait = leader_trait_strategist4
							has_trait = leader_trait_general_strategist4
							has_trait = leader_trait_nonstrategist
							has_trait = leader_trait_general_nonstrategist
							has_trait = leader_trait_nonstrategist2
							has_trait = leader_trait_general_nonstrategist2
							has_trait = leader_trait_nonstrategist3
							has_trait = leader_trait_general_nonstrategist3
							has_trait = leader_trait_nonstrategist4
							has_trait = leader_trait_general_nonstrategist4
							has_trait = leader_trait_tactician
							has_trait = leader_trait_general_tactician
							has_trait = leader_trait_tactician2
							has_trait = leader_trait_general_tactician2
							has_trait = leader_trait_tactician3
							has_trait = leader_trait_general_tactician3
							has_trait = leader_trait_tactician4
							has_trait = leader_trait_general_tactician4
							has_trait = leader_trait_nontactician
							has_trait = leader_trait_general_nontactician
							has_trait = leader_trait_nontactician2
							has_trait = leader_trait_general_nontactician2
							has_trait = leader_trait_nontactician3
							has_trait = leader_trait_general_nontactician3
							has_trait = leader_trait_nontactician4
							has_trait = leader_trait_general_nontactician4
							has_trait = leader_trait_general_nontactician4
							has_trait = leader_trait_general_nontactician4
						}
					}
					remove_trait = leader_trait_strategist
					remove_trait = leader_trait_general_strategist
					remove_trait = leader_trait_strategist2
					remove_trait = leader_trait_general_strategist2
					remove_trait = leader_trait_strategist3
					remove_trait = leader_trait_general_strategist3
					remove_trait = leader_trait_strategist4
					remove_trait = leader_trait_general_strategist4
					remove_trait = leader_trait_nonstrategist
					remove_trait = leader_trait_general_nonstrategist
					remove_trait = leader_trait_nonstrategist2
					remove_trait = leader_trait_general_nonstrategist2
					remove_trait = leader_trait_nonstrategist3
					remove_trait = leader_trait_general_nonstrategist3
					remove_trait = leader_trait_nonstrategist4
					remove_trait = leader_trait_general_nonstrategist4
					remove_trait = leader_trait_tactician
					remove_trait = leader_trait_general_tactician
					remove_trait = leader_trait_tactician2
					remove_trait = leader_trait_general_tactician2
					remove_trait = leader_trait_tactician3
					remove_trait = leader_trait_general_tactician3
					remove_trait = leader_trait_tactician4
					remove_trait = leader_trait_general_tactician4
					remove_trait = leader_trait_nontactician
					remove_trait = leader_trait_general_nontactician
					remove_trait = leader_trait_nontactician2
					remove_trait = leader_trait_general_nontactician2
					remove_trait = leader_trait_nontactician3
					remove_trait = leader_trait_general_nontactician3
					remove_trait = leader_trait_nontactician4
					remove_trait = leader_trait_general_nontactician4
					remove_trait = leader_trait_general_nontactician4
					remove_trait = leader_trait_general_nontactician4
				}
			}
		}

		set_heir = event_target:clone_heir_override

		# Enhanced Traits
		country_event = { id = heirtraits.17 }
		country_event = { id = heirtraits.18 }
		country_event = { id = heirtraits.19 }
		country_event = { id = heirtraits.20 }
		country_event = { id = heirtraits.21 }
		country_event = { id = heirtraits.22 }
		country_event = { id = heirtraits.23 }
		country_event = { id = heirtraits.24 }
	}

	after = {
		if = {
			limit = {
				any_owned_leader = {
					NOT = { has_leader_flag = clone_heir_governor }
					has_leader_flag = clone_heir_base
				}
			}
			random_owned_leader = {
				limit = {
					NOT = { has_leader_flag = clone_heir_governor }
					has_leader_flag = clone_heir_base
				}
				kill_leader = { show_notification = no }
			}
		}
	}
}

# Admiral
country_event = {
	id = usefulheirs.2002
	hide_window = yes
	is_triggered_only = yes

	immediate = {

		clone_leader = {
			target = event_target:heir_leader
			class = admiral
			traits = { trait = random_trait }
			effect = {
				set_leader_flag = clone_heir_admiral
				set_leader_flag = clone_heir_base
				save_event_target_as = clone_heir_override
				if = {
					limit = {
						owner = { is_ai = no }
					}
					set_name = "heir_name_bold"
				}
				if = {
					limit = {
						OR = {
							has_trait = leader_trait_general_strategist
							has_trait = leader_trait_general_strategist2
							has_trait = leader_trait_general_strategist3
							has_trait = leader_trait_general_strategist4
							has_trait = leader_trait_general_nonstrategist
							has_trait = leader_trait_general_nonstrategist2
							has_trait = leader_trait_general_nonstrategist3
							has_trait = leader_trait_general_nonstrategist4
							has_trait = leader_trait_general_tactician
							has_trait = leader_trait_general_tactician2
							has_trait = leader_trait_general_tactician3
							has_trait = leader_trait_general_tactician4
							has_trait = leader_trait_general_nontactician
							has_trait = leader_trait_general_nontactician2
							has_trait = leader_trait_general_nontactician3
							has_trait = leader_trait_general_nontactician4
							has_trait = leader_trait_governors
							has_trait = leader_trait_governors2
							has_trait = leader_trait_governors3
							has_trait = leader_trait_governors4
							has_trait = leader_trait_nongovernors
							has_trait = leader_trait_nongovernors2
							has_trait = leader_trait_nongovernors3
							has_trait = leader_trait_nongovernors4
						}
					}
					remove_trait = leader_trait_general_strategist
					remove_trait = leader_trait_general_strategist2
					remove_trait = leader_trait_general_strategist3
					remove_trait = leader_trait_general_strategist4
					remove_trait = leader_trait_general_nonstrategist
					remove_trait = leader_trait_general_nonstrategist2
					remove_trait = leader_trait_general_nonstrategist3
					remove_trait = leader_trait_general_nonstrategist4
					remove_trait = leader_trait_general_tactician
					remove_trait = leader_trait_general_tactician2
					remove_trait = leader_trait_general_tactician3
					remove_trait = leader_trait_general_tactician4
					remove_trait = leader_trait_general_nontactician
					remove_trait = leader_trait_general_nontactician2
					remove_trait = leader_trait_general_nontactician3
					remove_trait = leader_trait_general_nontactician4
					remove_trait = leader_trait_governors
					remove_trait = leader_trait_governors2
					remove_trait = leader_trait_governors3
					remove_trait = leader_trait_governors4
					remove_trait = leader_trait_nongovernors
					remove_trait = leader_trait_nongovernors2
					remove_trait = leader_trait_nongovernors3
					remove_trait = leader_trait_nongovernors4
				}
			}
		}

		set_heir = event_target:clone_heir_override

		# Enhanced Traits
		country_event = { id = heirtraits.1 }
		country_event = { id = heirtraits.2 }
		country_event = { id = heirtraits.3 }
		country_event = { id = heirtraits.4 }
		country_event = { id = heirtraits.5 }
		country_event = { id = heirtraits.6 }
		country_event = { id = heirtraits.7 }
		country_event = { id = heirtraits.8 }
		country_event = { id = heirtraits.9 }
		country_event = { id = heirtraits.10 }
		country_event = { id = heirtraits.11 }
		country_event = { id = heirtraits.12 }
		country_event = { id = heirtraits.13 }
		country_event = { id = heirtraits.14 }
		country_event = { id = heirtraits.15 }
		country_event = { id = heirtraits.16 }
	}

	after = {
		if = {
			limit = {
				any_owned_leader = {
					NOT = { has_leader_flag = clone_heir_admiral }
					has_leader_flag = clone_heir_base
				}
			}
			random_owned_leader = {
				limit = {
					NOT = { has_leader_flag = clone_heir_admiral }
					has_leader_flag = clone_heir_base
				}
				kill_leader = { show_notification = no }
			}
		}
	}
}

# General
country_event = {
	id = usefulheirs.2003
	hide_window = yes
	is_triggered_only = yes

	immediate = {

		clone_leader = {
			target = event_target:heir_leader
			class = general
			traits = { trait = random_trait }
			effect = {
				set_leader_flag = clone_heir_general
				set_leader_flag = clone_heir_base
				save_event_target_as = clone_heir_override
				if = {
					limit = {
						owner = { is_ai = no }
					}
					set_name = "heir_name_bold"
				}
				if = {
					limit = {
						OR = {
							has_trait = leader_trait_strategist
							has_trait = leader_trait_strategist2
							has_trait = leader_trait_strategist3
							has_trait = leader_trait_strategist4
							has_trait = leader_trait_nonstrategist
							has_trait = leader_trait_nonstrategist2
							has_trait = leader_trait_nonstrategist3
							has_trait = leader_trait_nonstrategist4
							has_trait = leader_trait_tactician
							has_trait = leader_trait_tactician2
							has_trait = leader_trait_tactician3
							has_trait = leader_trait_tactician4
							has_trait = leader_trait_nontactician
							has_trait = leader_trait_nontactician2
							has_trait = leader_trait_nontactician3
							has_trait = leader_trait_nontactician4
							has_trait = leader_trait_governors
							has_trait = leader_trait_governors2
							has_trait = leader_trait_governors3
							has_trait = leader_trait_governors4
							has_trait = leader_trait_nongovernors
							has_trait = leader_trait_nongovernors2
							has_trait = leader_trait_nongovernors3
							has_trait = leader_trait_nongovernors4
						}
					}
					remove_trait = leader_trait_strategist
					remove_trait = leader_trait_strategist2
					remove_trait = leader_trait_strategist3
					remove_trait = leader_trait_strategist4
					remove_trait = leader_trait_nonstrategist
					remove_trait = leader_trait_nonstrategist2
					remove_trait = leader_trait_nonstrategist3
					remove_trait = leader_trait_nonstrategist4
					remove_trait = leader_trait_tactician
					remove_trait = leader_trait_tactician2
					remove_trait = leader_trait_tactician3
					remove_trait = leader_trait_tactician4
					remove_trait = leader_trait_nontactician
					remove_trait = leader_trait_nontactician2
					remove_trait = leader_trait_nontactician3
					remove_trait = leader_trait_nontactician4
					remove_trait = leader_trait_governors
					remove_trait = leader_trait_governors2
					remove_trait = leader_trait_governors3
					remove_trait = leader_trait_governors4
					remove_trait = leader_trait_nongovernors
					remove_trait = leader_trait_nongovernors2
					remove_trait = leader_trait_nongovernors3
					remove_trait = leader_trait_nongovernors4
				}
			}
		}

		set_heir = event_target:clone_heir_override

		# Enhanced Traits
		country_event = { id = heirtraits.1 }
		country_event = { id = heirtraits.2 }
		country_event = { id = heirtraits.3 }
		country_event = { id = heirtraits.4 }
		country_event = { id = heirtraits.5 }
		country_event = { id = heirtraits.6 }
		country_event = { id = heirtraits.7 }
		country_event = { id = heirtraits.8 }
		country_event = { id = heirtraits.9 }
		country_event = { id = heirtraits.10 }
		country_event = { id = heirtraits.11 }
		country_event = { id = heirtraits.12 }
		country_event = { id = heirtraits.13 }
		country_event = { id = heirtraits.14 }
		country_event = { id = heirtraits.15 }
		country_event = { id = heirtraits.16 }
	}

	after = {
		if = {
			limit = {
				any_owned_leader = {
					NOT = { has_leader_flag = clone_heir_general }
					has_leader_flag = clone_heir_base
				}
			}
			random_owned_leader = {
				limit = {
					NOT = { has_leader_flag = clone_heir_general }
					has_leader_flag = clone_heir_base
				}
				kill_leader = { show_notification = no }
			}
		}
	}
}

# Scientist
country_event = {
	id = usefulheirs.2004
	hide_window = yes
	is_triggered_only = yes

	immediate = {

		clone_leader = {
			target = event_target:heir_leader
			class = scientist
			traits = { trait = random_trait }
			effect = {
				set_leader_flag = clone_heir_scientist
				set_leader_flag = clone_heir_base
				save_event_target_as = clone_heir_override
				if = {
					limit = {
						owner = { is_ai = no }
					}
					set_name = "heir_name_bold"
				}
				if = {
					limit = {
						OR = {
							has_trait = leader_trait_strategist
							has_trait = leader_trait_strategist2
							has_trait = leader_trait_strategist3
							has_trait = leader_trait_strategist4
							has_trait = leader_trait_nonstrategist
							has_trait = leader_trait_nonstrategist2
							has_trait = leader_trait_nonstrategist3
							has_trait = leader_trait_nonstrategist4
							has_trait = leader_trait_tactician
							has_trait = leader_trait_tactician2
							has_trait = leader_trait_tactician3
							has_trait = leader_trait_tactician4
							has_trait = leader_trait_nontactician
							has_trait = leader_trait_nontactician2
							has_trait = leader_trait_nontactician3
							has_trait = leader_trait_nontactician4
							has_trait = leader_trait_governors
							has_trait = leader_trait_governors2
							has_trait = leader_trait_governors3
							has_trait = leader_trait_governors4
							has_trait = leader_trait_nongovernors
							has_trait = leader_trait_nongovernors2
							has_trait = leader_trait_nongovernors3
							has_trait = leader_trait_nongovernors4
							has_trait = leader_trait_general_strategist
							has_trait = leader_trait_general_strategist2
							has_trait = leader_trait_general_strategist3
							has_trait = leader_trait_general_strategist4
							has_trait = leader_trait_general_nonstrategist
							has_trait = leader_trait_general_nonstrategist2
							has_trait = leader_trait_general_nonstrategist3
							has_trait = leader_trait_general_nonstrategist4
							has_trait = leader_trait_general_tactician
							has_trait = leader_trait_general_tactician2
							has_trait = leader_trait_general_tactician3
							has_trait = leader_trait_general_tactician4
							has_trait = leader_trait_general_nontactician
							has_trait = leader_trait_general_nontactician2
							has_trait = leader_trait_general_nontactician3
							has_trait = leader_trait_general_nontactician4
						}
					}
					remove_trait = leader_trait_strategist
					remove_trait = leader_trait_strategist2
					remove_trait = leader_trait_strategist3
					remove_trait = leader_trait_strategist4
					remove_trait = leader_trait_nonstrategist
					remove_trait = leader_trait_nonstrategist2
					remove_trait = leader_trait_nonstrategist3
					remove_trait = leader_trait_nonstrategist4
					remove_trait = leader_trait_tactician
					remove_trait = leader_trait_tactician2
					remove_trait = leader_trait_tactician3
					remove_trait = leader_trait_tactician4
					remove_trait = leader_trait_nontactician
					remove_trait = leader_trait_nontactician2
					remove_trait = leader_trait_nontactician3
					remove_trait = leader_trait_nontactician4
					remove_trait = leader_trait_governors
					remove_trait = leader_trait_governors2
					remove_trait = leader_trait_governors3
					remove_trait = leader_trait_governors4
					remove_trait = leader_trait_nongovernors
					remove_trait = leader_trait_nongovernors2
					remove_trait = leader_trait_nongovernors3
					remove_trait = leader_trait_nongovernors4
					remove_trait = leader_trait_general_strategist
					remove_trait = leader_trait_general_strategist2
					remove_trait = leader_trait_general_strategist3
					remove_trait = leader_trait_general_strategist4
					remove_trait = leader_trait_general_nonstrategist
					remove_trait = leader_trait_general_nonstrategist2
					remove_trait = leader_trait_general_nonstrategist3
					remove_trait = leader_trait_general_nonstrategist4
					remove_trait = leader_trait_general_tactician
					remove_trait = leader_trait_general_tactician2
					remove_trait = leader_trait_general_tactician3
					remove_trait = leader_trait_general_tactician4
					remove_trait = leader_trait_general_nontactician
					remove_trait = leader_trait_general_nontactician2
					remove_trait = leader_trait_general_nontactician3
					remove_trait = leader_trait_general_nontactician4
				}
			}
		}

		set_heir = event_target:clone_heir_override
	}

	after = {
		if = {
			limit = {
				any_owned_leader = {
					NOT = { has_leader_flag = clone_heir_scientist }
					has_leader_flag = clone_heir_base
				}
			}
			random_owned_leader = {
				limit = {
					NOT = { has_leader_flag = clone_heir_scientist }
					has_leader_flag = clone_heir_base
				}
				kill_leader = { show_notification = no }
			}
		}
	}
}

#############################

# Designate any leader as your heir
country_event = {
	id = usefulheirs.3000
	title = usefulheirs.3000.name

	desc = {
		text = usefulheirs.3000.desc
		trigger = {
			OR = {
				NOT = { has_valid_civic = civic_adoptive_dynasties }
				heir = { has_leader_flag = appointed_heir }
			}
		}
	}
	desc = {
		text = usefulheirs.3000.ad.desc
		trigger = { has_valid_civic = civic_adoptive_dynasties }
	}
	
	hide_window = no
	is_triggered_only = yes

	diplomatic = yes

	picture_event_data = {
		portrait = event_target:heir_leader
		planet_background = root.owner
		graphical_culture = root.owner
		city_level = root.owner
		room = root.owner
	}

	# Nevermind
	option = {
		name = usefulheirs.3000.f
		trigger = {
			exists = heir
			NOT = { has_valid_civic = civic_adoptive_dynasties }
		}
	}
	option = {
		name = usefulheirs.3000.f.ad
		trigger = {
			exists = heir
			has_valid_civic = civic_adoptive_dynasties
		}
	}

	# Governor
	option = {
		trigger = { NOT = { has_valid_civic = civic_adoptive_dynasties } }
		allow = {
			custom_tooltip = {
				fail_text = influencefail_text_useful_heirs
				has_resource = { type = influence amount >= 500 }
			}
		}
		name = usefulheirs.3000.a
		hidden_effect = { get_governors_heir = yes }
	}
	option = {
		trigger	 = { has_valid_civic = civic_adoptive_dynasties }
		name = usefulheirs.3000.a
		hidden_effect = { get_governors_heir = yes }
	}

	# Admiral
	option = {
		trigger = { NOT = { has_valid_civic = civic_adoptive_dynasties } }
		allow = {
		custom_tooltip = {
				fail_text = influencefail_text_useful_heirs
				has_resource = { type = influence amount >= 500 }
			}
		}
		name = usefulheirs.3000.b
		hidden_effect = { get_admirals_heir = yes }
	}
	option = {
		trigger	 = { has_valid_civic = civic_adoptive_dynasties }
		name = usefulheirs.3000.b
		hidden_effect = { get_admirals_heir = yes }
	}

	# General
	option = {
		trigger = { NOT = { has_valid_civic = civic_adoptive_dynasties } }
		allow = {
		custom_tooltip = {
				fail_text = influencefail_text_useful_heirs
				has_resource = { type = influence amount >= 500 }
			}
		}
		name = usefulheirs.3000.c
		hidden_effect = { get_generals_heir = yes }
	}
	option = {
		trigger	 = { has_valid_civic = civic_adoptive_dynasties }
		name = usefulheirs.3000.c
		hidden_effect = { get_generals_heir = yes }
	}

	# Scientist
	option = {
		trigger = { NOT = { has_valid_civic = civic_adoptive_dynasties } }
		allow = {
		custom_tooltip = {
				fail_text = influencefail_text_useful_heirs
				has_resource = { type = influence amount >= 500 }
			}
		}
		name = usefulheirs.3000.d
		hidden_effect = { get_scientists_heir = yes }
	}
	option = {
		trigger	 = { has_valid_civic = civic_adoptive_dynasties }
		name = usefulheirs.3000.d
		hidden_effect = { get_scientists_heir = yes }
	}

	# Just disinherit them
	option = {
		name = usefulheirs.3000.e
		trigger = { NOT = { has_valid_civic = civic_adoptive_dynasties } }
		hidden_effect = {
			if = {
				limit =  {
					has_global_flag = civil_wars_active
				}
				if = {
					limit = {
						NOT = { has_valid_civic = civic_adoptive_dynasties }
					}
					heir_setup_non_ad_just_disinherit = yes
				}
				else_if = {
					limit = {
						has_valid_civic = civic_adoptive_dynasties
						heir = {
							has_leader_flag = appointed_heir
						}
					}
					heir_setup_ad_just_disinherit = yes
				}
			}
			heir = { kill_leader = { show_notification = no } }
		}
	}

	# AI Option
	option = {
		name = usefulheirs.2000.AI
		trigger = {
			is_ai = yes
		}
		ai_chance = {
			factor = 1
		}
		random_list = {
			# Governor
			40 = {
				hidden_effect = { get_governors_heir = yes }
			}
			# Admiral
			40 = {
				hidden_effect = { get_admirals_heir = yes }
			}
			# General
			15 = {
				hidden_effect = { get_generals_heir = yes }
			}
			# Scientist
			5 = {
				hidden_effect = { get_scientists_heir = yes }
			}
		}
	}
}

# Designate any leader as your heir if you dont have an heir already
country_event = {
	id = usefulheirs.3100
	title = usefulheirs.3100.name
	desc = usefulheirs.3100.desc
	hide_window = no
	is_triggered_only = yes

	diplomatic = yes

	picture_event_data = {
		portrait = root.ruler
		planet_background = root.owner
		graphical_culture = root.owner
		city_level = root.owner
		room = root.owner
	}

	# Nevermind
	option = {
		name = usefulheirs.3000.f
		trigger = {
			exists = heir
			NOT = { has_valid_civic = civic_adoptive_dynasties }
		}
	}
	option = {
		name = usefulheirs.3000.f.ad
		trigger = {
			exists = heir
			has_valid_civic = civic_adoptive_dynasties
		}
	}

	# Governor
	option = {
		trigger = { NOT = { has_valid_civic = civic_adoptive_dynasties } }
		allow = {
			custom_tooltip = {
				fail_text = influencefail_text_useful_heirs
				has_resource = { type = influence amount >= 500 }
			}
		}
		name = usefulheirs.3000.a
		hidden_effect = { get_governors_heir = yes }
	}
	option = {
		trigger	 = { has_valid_civic = civic_adoptive_dynasties }
		name = usefulheirs.3000.a
		hidden_effect = { get_governors_heir = yes }
	}

	# Admiral
	option = {
		trigger = { NOT = { has_valid_civic = civic_adoptive_dynasties } }
		allow = {
		custom_tooltip = {
				fail_text = influencefail_text_useful_heirs
				has_resource = { type = influence amount >= 500 }
			}
		}
		name = usefulheirs.3000.b
		hidden_effect = { get_admirals_heir = yes }
	}
	option = {
		trigger	 = { has_valid_civic = civic_adoptive_dynasties }
		name = usefulheirs.3000.b
		hidden_effect = { get_admirals_heir = yes }
	}

	# General
	option = {
		trigger = { NOT = { has_valid_civic = civic_adoptive_dynasties } }
		allow = {
		custom_tooltip = {
				fail_text = influencefail_text_useful_heirs
				has_resource = { type = influence amount >= 500 }
			}
		}
		name = usefulheirs.3000.c
		hidden_effect = { get_generals_heir = yes }
	}
	option = {
		trigger	 = { has_valid_civic = civic_adoptive_dynasties }
		name = usefulheirs.3000.c
		hidden_effect = { get_generals_heir = yes }
	}

	# Scientist
	option = {
		trigger = { NOT = { has_valid_civic = civic_adoptive_dynasties } }
		allow = {
		custom_tooltip = {
				fail_text = influencefail_text_useful_heirs
				has_resource = { type = influence amount >= 500 }
			}
		}
		name = usefulheirs.3000.d
		hidden_effect = { get_scientists_heir = yes }
	}
	option = {
		trigger	 = { has_valid_civic = civic_adoptive_dynasties }
		name = usefulheirs.3000.d
		hidden_effect = { get_scientists_heir = yes }
	}

	# Just disinherit them
	option = {
		name = usefulheirs.3000.e
		trigger = { NOT = { has_valid_civic = civic_adoptive_dynasties } }
		hidden_effect = {
			if = {
				limit =  {
					has_global_flag = civil_wars_active
				}
				if = {
					limit = {
						NOT = { has_valid_civic = civic_adoptive_dynasties }
					}
					heir_setup_non_ad_just_disinherit = yes
				}
				else_if = {
					limit = {
						has_valid_civic = civic_adoptive_dynasties
						heir = {
							has_leader_flag = appointed_heir
						}
					}
					heir_setup_ad_just_disinherit = yes
				}
			}
			heir = { kill_leader = { show_notification = no } }
		}
	}

	# AI Option
	option = {
		name = usefulheirs.2000.AI
		trigger = {
			is_ai = yes
		}
		ai_chance = {
			factor = 1
		}
		random_list = {
			# Governor
			40 = {
				hidden_effect = { get_governors_heir = yes }
			}
			# Admiral
			40 = {
				hidden_effect = { get_admirals_heir = yes }
			}
			# General
			15 = {
				hidden_effect = { get_generals_heir = yes }
			}
			# Scientist
			5 = {
				hidden_effect = { get_scientists_heir = yes }
			}
		}
	}

	after = { 
		set_country_flag = no_prior_heir
	}
}

# Governor
country_event = {
	id = usefulheirs.3110
	title = usefulheirs.3110.name
	desc = usefulheirs.3110.desc
	hide_window = no
	is_triggered_only = yes

	diplomatic = yes

	picture_event_data = {
		portrait = root.ruler
		planet_background = root.capital_scope
		graphical_culture = root.owner
		city_level = root.capital_scope
		room = root.ruler
	}

	# Nevermind
	option = {
		name = usefulheirs.3110.back
		ai_chance = {
			factor = 0.5
		}
	}

	option = {
		add_resource = { influence = -500 }
		name = usefulheirs.3110.heir_maybe_1
		trigger = {
			AND = {
				check_variable = { which = total_governors value >= 1 }
				NOT = { has_valid_civic = civic_adoptive_dynasties }
			}
		}
		hidden_effect = {
			event_target:heir_maybe_1 = {
				save_event_target_as = new_chosen_heir
				set_leader_flag = appointed_heir
			}
			heir_setup_non_ad = yes
		}
		ai_chance = {
			factor = 1
		}
	}
	option = {
		name = usefulheirs.3110.heir_maybe_1
		trigger = {
			AND = {
				check_variable = { which = total_governors value >= 1 }
				has_valid_civic = civic_adoptive_dynasties
			}
		}
		hidden_effect = {
			event_target:heir_maybe_1 = {
				save_event_target_as = new_chosen_heir
				set_leader_flag = appointed_heir
			}
			heir_setup_ad = yes
		}
		ai_chance = {
			factor = 1
		}
	}

	option = {
		add_resource = { influence = -500 }
		name = usefulheirs.3110.heir_maybe_2
		trigger = {
			AND = {
				check_variable = { which = total_governors value >= 2 }
				NOT = { has_valid_civic = civic_adoptive_dynasties }
			}
		}
		hidden_effect = {
			event_target:heir_maybe_2 = {
				save_event_target_as = new_chosen_heir
				set_leader_flag = appointed_heir
			}
			heir_setup_non_ad = yes
		}
		ai_chance = {
			factor = 1
		}
	}
	option = {
		name = usefulheirs.3110.heir_maybe_2
		trigger = {
			AND = {
				check_variable = { which = total_governors value >= 2 }
				has_valid_civic = civic_adoptive_dynasties
			}
		}
		hidden_effect = {
			event_target:heir_maybe_2 = {
				save_event_target_as = new_chosen_heir
				set_leader_flag = appointed_heir
			}
			heir_setup_ad = yes
		}
		ai_chance = {
			factor = 1
		}
	}

	option = {
		add_resource = { influence = -500 }
		name = usefulheirs.3110.heir_maybe_3
		trigger = {
			AND = {
				check_variable = { which = total_governors value >= 3 }
				NOT = { has_valid_civic = civic_adoptive_dynasties }
			}
		}
		hidden_effect = {
			event_target:heir_maybe_3 = {
				save_event_target_as = new_chosen_heir
				set_leader_flag = appointed_heir
			}
			heir_setup_non_ad = yes
		}
		ai_chance = {
			factor = 1
		}
	}
	option = {
		name = usefulheirs.3110.heir_maybe_3
		trigger = {
			AND = {
				check_variable = { which = total_governors value >= 3 }
				has_valid_civic = civic_adoptive_dynasties
			}
		}
		hidden_effect = {
			event_target:heir_maybe_3 = {
				save_event_target_as = new_chosen_heir
				set_leader_flag = appointed_heir
			}
			heir_setup_ad = yes
		}
		ai_chance = {
			factor = 1
		}
	}

	option = {
		add_resource = { influence = -500 }
		name = usefulheirs.3110.heir_maybe_4
		trigger = {
			AND = {
				check_variable = { which = total_governors value >= 4 }
				NOT = { has_valid_civic = civic_adoptive_dynasties }
			}
		}
		hidden_effect = {
			event_target:heir_maybe_4 = {
				save_event_target_as = new_chosen_heir
				set_leader_flag = appointed_heir
			}
			heir_setup_non_ad = yes
		}
		ai_chance = {
			factor = 1
		}
	}
	option = {
		name = usefulheirs.3110.heir_maybe_4
		trigger = {
			AND = {
				check_variable = { which = total_governors value >= 4 }
				has_valid_civic = civic_adoptive_dynasties
			}
		}
		hidden_effect = {
			event_target:heir_maybe_4 = {
				save_event_target_as = new_chosen_heir
				set_leader_flag = appointed_heir
			}
			heir_setup_ad = yes
		}
		ai_chance = {
			factor = 1
		}
	}

	option = {
		add_resource = { influence = -500 }
		name = usefulheirs.3110.heir_maybe_5
		trigger = {
			AND = {
				check_variable = { which = total_governors value >= 5 }
				NOT = { has_valid_civic = civic_adoptive_dynasties }
			}
		}
		hidden_effect = {
			event_target:heir_maybe_5 = {
				save_event_target_as = new_chosen_heir
				set_leader_flag = appointed_heir
			}
			heir_setup_non_ad = yes
		}
		ai_chance = {
			factor = 1
		}
	}
	option = {
		name = usefulheirs.3110.heir_maybe_5
		trigger = {
			AND = {
				check_variable = { which = total_governors value >= 5 }
				has_valid_civic = civic_adoptive_dynasties
			}
		}
		hidden_effect = {
			event_target:heir_maybe_5 = {
				save_event_target_as = new_chosen_heir
				set_leader_flag = appointed_heir
			}
			heir_setup_ad = yes
		}
		ai_chance = {
			factor = 1
		}
	}

	option = {
		add_resource = { influence = -500 }
		name = usefulheirs.3110.heir_maybe_6
		trigger = {
			AND = {
				check_variable = { which = total_governors value >= 6 }
				NOT = { has_valid_civic = civic_adoptive_dynasties }
			}
		}
		hidden_effect = {
			event_target:heir_maybe_6 = {
				save_event_target_as = new_chosen_heir
				set_leader_flag = appointed_heir
			}
			heir_setup_non_ad = yes
		}
		ai_chance = {
			factor = 1
		}
	}
	option = {
		name = usefulheirs.3110.heir_maybe_6
		trigger = {
			AND = {
				check_variable = { which = total_governors value >= 6 }
				has_valid_civic = civic_adoptive_dynasties
			}
		}
		hidden_effect = {
			event_target:heir_maybe_6 = {
				save_event_target_as = new_chosen_heir
				set_leader_flag = appointed_heir
			}
			heir_setup_ad = yes
		}
		ai_chance = {
			factor = 1
		}
	}

	option = {
		add_resource = { influence = -500 }
		name = usefulheirs.3110.heir_maybe_7
		trigger = {
			AND = {
				check_variable = { which = total_governors value >= 7 }
				NOT = { has_valid_civic = civic_adoptive_dynasties }
			}
		}
		hidden_effect = {
			event_target:heir_maybe_7 = {
				save_event_target_as = new_chosen_heir
				set_leader_flag = appointed_heir
			}
			heir_setup_non_ad = yes
		}
		ai_chance = {
			factor = 1
		}
	}
	option = {
		name = usefulheirs.3110.heir_maybe_7
		trigger = {
			AND = {
				check_variable = { which = total_governors value >= 7 }
				has_valid_civic = civic_adoptive_dynasties
			}
		}
		hidden_effect = {
			event_target:heir_maybe_7 = {
				save_event_target_as = new_chosen_heir
				set_leader_flag = appointed_heir
			}
			heir_setup_ad = yes
		}
		ai_chance = {
			factor = 1
		}
	}

	option = {
		add_resource = { influence = -500 }
		name = usefulheirs.3110.heir_maybe_8
		trigger = {
			AND = {
				check_variable = { which = total_governors value >= 8 }
				NOT = { has_valid_civic = civic_adoptive_dynasties }
			}
		}
		hidden_effect = {
			event_target:heir_maybe_8 = {
				save_event_target_as = new_chosen_heir
				set_leader_flag = appointed_heir
			}
			heir_setup_non_ad = yes
		}
		ai_chance = {
			factor = 1
		}
	}
	option = {
		name = usefulheirs.3110.heir_maybe_8
		trigger = {
			AND = {
				check_variable = { which = total_governors value >= 8 }
				has_valid_civic = civic_adoptive_dynasties
			}
		}
		hidden_effect = {
			event_target:heir_maybe_8 = {
				save_event_target_as = new_chosen_heir
				set_leader_flag = appointed_heir
			}
			heir_setup_ad = yes
		}
		ai_chance = {
			factor = 1
		}
	}

	option = {
		add_resource = { influence = -500 }
		name = usefulheirs.3110.heir_maybe_9
		trigger = {
			AND = {
				check_variable = { which = total_governors value >= 9 }
				NOT = { has_valid_civic = civic_adoptive_dynasties }
			}
		}
		hidden_effect = {
			event_target:heir_maybe_9 = {
				save_event_target_as = new_chosen_heir
				set_leader_flag = appointed_heir
			}
			heir_setup_non_ad = yes
		}
		ai_chance = {
			factor = 1
		}
	}
	option = {
		name = usefulheirs.3110.heir_maybe_9
		trigger = {
			AND = {
				check_variable = { which = total_governors value >= 9 }
				has_valid_civic = civic_adoptive_dynasties
			}
		}
		hidden_effect = {
			event_target:heir_maybe_9 = {
				save_event_target_as = new_chosen_heir
				set_leader_flag = appointed_heir
			}
			heir_setup_ad = yes
		}
		ai_chance = {
			factor = 1
		}
	}

	option = {
		add_resource = { influence = -500 }
		name = usefulheirs.3110.heir_maybe_10
		trigger = {
			AND = {
				check_variable = { which = total_governors value >= 10 }
				NOT = { has_valid_civic = civic_adoptive_dynasties }
			}
		}
		hidden_effect = {
			event_target:heir_maybe_10 = {
				save_event_target_as = new_chosen_heir
				set_leader_flag = appointed_heir
			}
			heir_setup_non_ad = yes
		}
		ai_chance = {
			factor = 1
		}
	}
	option = {
		name = usefulheirs.3110.heir_maybe_10
		trigger = {
			AND = {
				check_variable = { which = total_governors value >= 10 }
				has_valid_civic = civic_adoptive_dynasties
			}
		}
		hidden_effect = {
			event_target:heir_maybe_10 = {
				save_event_target_as = new_chosen_heir
				set_leader_flag = appointed_heir
			}
			heir_setup_ad = yes
		}
		ai_chance = {
			factor = 1
		}
	}
}

# Admiral
country_event = {
	id = usefulheirs.3120
	title = usefulheirs.3120.name
	desc = usefulheirs.3110.desc
	hide_window = no
	is_triggered_only = yes

	diplomatic = yes

	picture_event_data = {
		portrait = root.ruler
		planet_background = root.capital_scope
		graphical_culture = root.owner
		city_level = root.capital_scope
		room = root.ruler
	}

	# Nevermind
	option = {
		name = usefulheirs.3110.back
		ai_chance = {
			factor = 0.5
		}
	}

	option = {
		add_resource = { influence = -500 }
		name = usefulheirs.3110.heir_maybe_1
		trigger = {
			AND = {
				check_variable = { which = total_admirals value >= 1 }
				NOT = { has_valid_civic = civic_adoptive_dynasties }
			}
		}
		hidden_effect = {
			event_target:heir_maybe_1 = {
				save_event_target_as = new_chosen_heir
				set_leader_flag = appointed_heir
			}
			heir_setup_non_ad = yes
		}
		ai_chance = {
			factor = 1
		}
	}
	option = {
		name = usefulheirs.3110.heir_maybe_1
		trigger = {
			AND = {
				check_variable = { which = total_admirals value >= 1 }
				has_valid_civic = civic_adoptive_dynasties
			}
		}
		hidden_effect = {
			event_target:heir_maybe_1 = {
				save_event_target_as = new_chosen_heir
				set_leader_flag = appointed_heir
			}
			heir_setup_ad = yes
		}
		ai_chance = {
			factor = 1
		}
	}

	option = {
		add_resource = { influence = -500 }
		name = usefulheirs.3110.heir_maybe_2
		trigger = {
			AND = {
				check_variable = { which = total_admirals value >= 2 }
				NOT = { has_valid_civic = civic_adoptive_dynasties }
			}
		}
		hidden_effect = {
			event_target:heir_maybe_2 = {
				save_event_target_as = new_chosen_heir
				set_leader_flag = appointed_heir
			}
			heir_setup_non_ad = yes
		}
		ai_chance = {
			factor = 1
		}
	}
	option = {
		name = usefulheirs.3110.heir_maybe_2
		trigger = {
			AND = {
				check_variable = { which = total_admirals value >= 2 }
				has_valid_civic = civic_adoptive_dynasties
			}
		}
		hidden_effect = {
			event_target:heir_maybe_2 = {
				save_event_target_as = new_chosen_heir
				set_leader_flag = appointed_heir
			}
			heir_setup_ad = yes
		}
		ai_chance = {
			factor = 1
		}
	}

	option = {
		add_resource = { influence = -500 }
		name = usefulheirs.3110.heir_maybe_3
		trigger = {
			AND = {
				check_variable = { which = total_admirals value >= 3 }
				NOT = { has_valid_civic = civic_adoptive_dynasties }
			}
		}
		hidden_effect = {
			event_target:heir_maybe_3 = {
				save_event_target_as = new_chosen_heir
				set_leader_flag = appointed_heir
			}
			heir_setup_non_ad = yes
		}
		ai_chance = {
			factor = 1
		}
	}
	option = {
		name = usefulheirs.3110.heir_maybe_3
		trigger = {
			AND = {
				check_variable = { which = total_admirals value >= 3 }
				has_valid_civic = civic_adoptive_dynasties
			}
		}
		hidden_effect = {
			event_target:heir_maybe_3 = {
				save_event_target_as = new_chosen_heir
				set_leader_flag = appointed_heir
			}
			heir_setup_ad = yes
		}
		ai_chance = {
			factor = 1
		}
	}

	option = {
		add_resource = { influence = -500 }
		name = usefulheirs.3110.heir_maybe_4
		trigger = {
			AND = {
				check_variable = { which = total_admirals value >= 4 }
				NOT = { has_valid_civic = civic_adoptive_dynasties }
			}
		}
		hidden_effect = {
			event_target:heir_maybe_4 = {
				save_event_target_as = new_chosen_heir
				set_leader_flag = appointed_heir
			}
			heir_setup_non_ad = yes
		}
		ai_chance = {
			factor = 1
		}
	}
	option = {
		name = usefulheirs.3110.heir_maybe_4
		trigger = {
			AND = {
				check_variable = { which = total_admirals value >= 4 }
				has_valid_civic = civic_adoptive_dynasties
			}
		}
		hidden_effect = {
			event_target:heir_maybe_4 = {
				save_event_target_as = new_chosen_heir
				set_leader_flag = appointed_heir
			}
			heir_setup_ad = yes
		}
		ai_chance = {
			factor = 1
		}
	}

	option = {
		add_resource = { influence = -500 }
		name = usefulheirs.3110.heir_maybe_5
		trigger = {
			AND = {
				check_variable = { which = total_admirals value >= 5 }
				NOT = { has_valid_civic = civic_adoptive_dynasties }
			}
		}
		hidden_effect = {
			event_target:heir_maybe_5 = {
				save_event_target_as = new_chosen_heir
				set_leader_flag = appointed_heir
			}
			heir_setup_non_ad = yes
		}
		ai_chance = {
			factor = 1
		}
	}
	option = {
		name = usefulheirs.3110.heir_maybe_5
		trigger = {
			AND = {
				check_variable = { which = total_admirals value >= 5 }
				has_valid_civic = civic_adoptive_dynasties
			}
		}
		hidden_effect = {
			event_target:heir_maybe_5 = {
				save_event_target_as = new_chosen_heir
				set_leader_flag = appointed_heir
			}
			heir_setup_ad = yes
		}
		ai_chance = {
			factor = 1
		}
	}

	option = {
		add_resource = { influence = -500 }
		name = usefulheirs.3110.heir_maybe_6
		trigger = {
			AND = {
				check_variable = { which = total_admirals value >= 6 }
				NOT = { has_valid_civic = civic_adoptive_dynasties }
			}
		}
		hidden_effect = {
			event_target:heir_maybe_6 = {
				save_event_target_as = new_chosen_heir
				set_leader_flag = appointed_heir
			}
			heir_setup_non_ad = yes
		}
		ai_chance = {
			factor = 1
		}
	}
	option = {
		name = usefulheirs.3110.heir_maybe_6
		trigger = {
			AND = {
				check_variable = { which = total_admirals value >= 6 }
				has_valid_civic = civic_adoptive_dynasties
			}
		}
		hidden_effect = {
			event_target:heir_maybe_6 = {
				save_event_target_as = new_chosen_heir
				set_leader_flag = appointed_heir
			}
			heir_setup_ad = yes
		}
		ai_chance = {
			factor = 1
		}
	}

	option = {
		add_resource = { influence = -500 }
		name = usefulheirs.3110.heir_maybe_7
		trigger = {
			AND = {
				check_variable = { which = total_admirals value >= 7 }
				NOT = { has_valid_civic = civic_adoptive_dynasties }
			}
		}
		hidden_effect = {
			event_target:heir_maybe_7 = {
				save_event_target_as = new_chosen_heir
				set_leader_flag = appointed_heir
			}
			heir_setup_non_ad = yes
		}
		ai_chance = {
			factor = 1
		}
	}
	option = {
		name = usefulheirs.3110.heir_maybe_7
		trigger = {
			AND = {
				check_variable = { which = total_admirals value >= 7 }
				has_valid_civic = civic_adoptive_dynasties
			}
		}
		hidden_effect = {
			event_target:heir_maybe_7 = {
				save_event_target_as = new_chosen_heir
				set_leader_flag = appointed_heir
			}
			heir_setup_ad = yes
		}
		ai_chance = {
			factor = 1
		}
	}

	option = {
		add_resource = { influence = -500 }
		name = usefulheirs.3110.heir_maybe_8
		trigger = {
			AND = {
				check_variable = { which = total_admirals value >= 8 }
				NOT = { has_valid_civic = civic_adoptive_dynasties }
			}
		}
		hidden_effect = {
			event_target:heir_maybe_8 = {
				save_event_target_as = new_chosen_heir
				set_leader_flag = appointed_heir
			}
			heir_setup_non_ad = yes
		}
		ai_chance = {
			factor = 1
		}
	}
	option = {
		name = usefulheirs.3110.heir_maybe_8
		trigger = {
			AND = {
				check_variable = { which = total_admirals value >= 8 }
				has_valid_civic = civic_adoptive_dynasties
			}
		}
		hidden_effect = {
			event_target:heir_maybe_8 = {
				save_event_target_as = new_chosen_heir
				set_leader_flag = appointed_heir
			}
			heir_setup_ad = yes
		}
		ai_chance = {
			factor = 1
		}
	}

	option = {
		add_resource = { influence = -500 }
		name = usefulheirs.3110.heir_maybe_9
		trigger = {
			AND = {
				check_variable = { which = total_admirals value >= 9 }
				NOT = { has_valid_civic = civic_adoptive_dynasties }
			}
		}
		hidden_effect = {
			event_target:heir_maybe_9 = {
				save_event_target_as = new_chosen_heir
				set_leader_flag = appointed_heir
			}
			heir_setup_non_ad = yes
		}
		ai_chance = {
			factor = 1
		}
	}
	option = {
		name = usefulheirs.3110.heir_maybe_9
		trigger = {
			AND = {
				check_variable = { which = total_admirals value >= 9 }
				has_valid_civic = civic_adoptive_dynasties
			}
		}
		hidden_effect = {
			event_target:heir_maybe_9 = {
				save_event_target_as = new_chosen_heir
				set_leader_flag = appointed_heir
			}
			heir_setup_ad = yes
		}
		ai_chance = {
			factor = 1
		}
	}

	option = {
		add_resource = { influence = -500 }
		name = usefulheirs.3110.heir_maybe_10
		trigger = {
			AND = {
				check_variable = { which = total_admirals value >= 10 }
				NOT = { has_valid_civic = civic_adoptive_dynasties }
			}
		}
		hidden_effect = {
			event_target:heir_maybe_10 = {
				save_event_target_as = new_chosen_heir
				set_leader_flag = appointed_heir
			}
			heir_setup_non_ad = yes
		}
		ai_chance = {
			factor = 1
		}
	}
	option = {
		name = usefulheirs.3110.heir_maybe_10
		trigger = {
			AND = {
				check_variable = { which = total_admirals value >= 10 }
				has_valid_civic = civic_adoptive_dynasties
			}
		}
		hidden_effect = {
			event_target:heir_maybe_10 = {
				save_event_target_as = new_chosen_heir
				set_leader_flag = appointed_heir
			}
			heir_setup_ad = yes
		}
		ai_chance = {
			factor = 1
		}
	}
}

# General
country_event = {
	id = usefulheirs.3130
	title = usefulheirs.3130.name
	desc = usefulheirs.3110.desc
	hide_window = no
	is_triggered_only = yes

	diplomatic = yes

	picture_event_data = {
		portrait = root.ruler
		planet_background = root.capital_scope
		graphical_culture = root.owner
		city_level = root.capital_scope
		room = root.ruler
	}

	# Nevermind
	option = {
		name = usefulheirs.3110.back
		ai_chance = {
			factor = 0.5
		}
	}

	option = {
		add_resource = { influence = -500 }
		name = usefulheirs.3110.heir_maybe_1
		trigger = {
			AND = {
				check_variable = { which = total_generals value >= 1 }
				NOT = { has_valid_civic = civic_adoptive_dynasties }
			}
		}
		hidden_effect = {
			event_target:heir_maybe_1 = {
				save_event_target_as = new_chosen_heir
				set_leader_flag = appointed_heir
			}
			heir_setup_non_ad = yes
		}
		ai_chance = {
			factor = 1
		}
	}
	option = {
		name = usefulheirs.3110.heir_maybe_1
		trigger = {
			AND = {
				check_variable = { which = total_generals value >= 1 }
				has_valid_civic = civic_adoptive_dynasties
			}
		}
		hidden_effect = {
			event_target:heir_maybe_1 = {
				save_event_target_as = new_chosen_heir
				set_leader_flag = appointed_heir
			}
			heir_setup_ad = yes
		}
		ai_chance = {
			factor = 1
		}
	}

	option = {
		add_resource = { influence = -500 }
		name = usefulheirs.3110.heir_maybe_2
		trigger = {
			AND = {
				check_variable = { which = total_generals value >= 2 }
				NOT = { has_valid_civic = civic_adoptive_dynasties }
			}
		}
		hidden_effect = {
			event_target:heir_maybe_2 = {
				save_event_target_as = new_chosen_heir
				set_leader_flag = appointed_heir
			}
			heir_setup_non_ad = yes
		}
		ai_chance = {
			factor = 1
		}
	}
	option = {
		name = usefulheirs.3110.heir_maybe_2
		trigger = {
			AND = {
				check_variable = { which = total_generals value >= 2 }
				has_valid_civic = civic_adoptive_dynasties
			}
		}
		hidden_effect = {
			event_target:heir_maybe_2 = {
				save_event_target_as = new_chosen_heir
				set_leader_flag = appointed_heir
			}
			heir_setup_ad = yes
		}
		ai_chance = {
			factor = 1
		}
	}

	option = {
		add_resource = { influence = -500 }
		name = usefulheirs.3110.heir_maybe_3
		trigger = {
			AND = {
				check_variable = { which = total_generals value >= 3 }
				NOT = { has_valid_civic = civic_adoptive_dynasties }
			}
		}
		hidden_effect = {
			event_target:heir_maybe_3 = {
				save_event_target_as = new_chosen_heir
				set_leader_flag = appointed_heir
			}
			heir_setup_non_ad = yes
		}
		ai_chance = {
			factor = 1
		}
	}
	option = {
		name = usefulheirs.3110.heir_maybe_3
		trigger = {
			AND = {
				check_variable = { which = total_generals value >= 3 }
				has_valid_civic = civic_adoptive_dynasties
			}
		}
		hidden_effect = {
			event_target:heir_maybe_3 = {
				save_event_target_as = new_chosen_heir
				set_leader_flag = appointed_heir
			}
			heir_setup_ad = yes
		}
		ai_chance = {
			factor = 1
		}
	}

	option = {
		add_resource = { influence = -500 }
		name = usefulheirs.3110.heir_maybe_4
		trigger = {
			AND = {
				check_variable = { which = total_generals value >= 4 }
				NOT = { has_valid_civic = civic_adoptive_dynasties }
			}
		}
		hidden_effect = {
			event_target:heir_maybe_4 = {
				save_event_target_as = new_chosen_heir
				set_leader_flag = appointed_heir
			}
			heir_setup_non_ad = yes
		}
		ai_chance = {
			factor = 1
		}
	}
	option = {
		name = usefulheirs.3110.heir_maybe_4
		trigger = {
			AND = {
				check_variable = { which = total_generals value >= 4 }
				has_valid_civic = civic_adoptive_dynasties
			}
		}
		hidden_effect = {
			event_target:heir_maybe_4 = {
				save_event_target_as = new_chosen_heir
				set_leader_flag = appointed_heir
			}
			heir_setup_ad = yes
		}
		ai_chance = {
			factor = 1
		}
	}

	option = {
		add_resource = { influence = -500 }
		name = usefulheirs.3110.heir_maybe_5
		trigger = {
			AND = {
				check_variable = { which = total_generals value >= 5 }
				NOT = { has_valid_civic = civic_adoptive_dynasties }
			}
		}
		hidden_effect = {
			event_target:heir_maybe_5 = {
				save_event_target_as = new_chosen_heir
				set_leader_flag = appointed_heir
			}
			heir_setup_non_ad = yes
		}
		ai_chance = {
			factor = 1
		}
	}
	option = {
		name = usefulheirs.3110.heir_maybe_5
		trigger = {
			AND = {
				check_variable = { which = total_generals value >= 5 }
				has_valid_civic = civic_adoptive_dynasties
			}
		}
		hidden_effect = {
			event_target:heir_maybe_5 = {
				save_event_target_as = new_chosen_heir
				set_leader_flag = appointed_heir
			}
			heir_setup_ad = yes
		}
		ai_chance = {
			factor = 1
		}
	}

	option = {
		add_resource = { influence = -500 }
		name = usefulheirs.3110.heir_maybe_6
		trigger = {
			AND = {
				check_variable = { which = total_generals value >= 6}
				NOT = { has_valid_civic = civic_adoptive_dynasties }
			}
		}
		hidden_effect = {
			event_target:heir_maybe_6 = {
				save_event_target_as = new_chosen_heir
				set_leader_flag = appointed_heir
			}
			heir_setup_non_ad = yes
		}
		ai_chance = {
			factor = 1
		}
	}
	option = {
		name = usefulheirs.3110.heir_maybe_6
		trigger = {
			AND = {
				check_variable = { which = total_generals value >= 6 }
				has_valid_civic = civic_adoptive_dynasties
			}
		}
		hidden_effect = {
			event_target:heir_maybe_6 = {
				save_event_target_as = new_chosen_heir
				set_leader_flag = appointed_heir
			}
			heir_setup_ad = yes
		}
		ai_chance = {
			factor = 1
		}
	}

	option = {
		add_resource = { influence = -500 }
		name = usefulheirs.3110.heir_maybe_7
		trigger = {
			AND = {
				check_variable = { which = total_generals value >= 7 }
				NOT = { has_valid_civic = civic_adoptive_dynasties }
			}
		}
		hidden_effect = {
			event_target:heir_maybe_7 = {
				save_event_target_as = new_chosen_heir
				set_leader_flag = appointed_heir
			}
			heir_setup_non_ad = yes
		}
		ai_chance = {
			factor = 1
		}
	}
	option = {
		name = usefulheirs.3110.heir_maybe_7
		trigger = {
			AND = {
				check_variable = { which = total_generals value >= 7 }
				has_valid_civic = civic_adoptive_dynasties
			}
		}
		hidden_effect = {
			event_target:heir_maybe_7 = {
				save_event_target_as = new_chosen_heir
				set_leader_flag = appointed_heir
			}
			heir_setup_ad = yes
		}
		ai_chance = {
			factor = 1
		}
	}

	option = {
		add_resource = { influence = -500 }
		name = usefulheirs.3110.heir_maybe_8
		trigger = {
			AND = {
				check_variable = { which = total_generals value >= 8 }
				NOT = { has_valid_civic = civic_adoptive_dynasties }
			}
		}
		hidden_effect = {
			event_target:heir_maybe_8 = {
				save_event_target_as = new_chosen_heir
				set_leader_flag = appointed_heir
			}
			heir_setup_non_ad = yes
		}
		ai_chance = {
			factor = 1
		}
	}
	option = {
		name = usefulheirs.3110.heir_maybe_8
		trigger = {
			AND = {
				check_variable = { which = total_generals value >= 8 }
				has_valid_civic = civic_adoptive_dynasties
			}
		}
		hidden_effect = {
			event_target:heir_maybe_8 = {
				save_event_target_as = new_chosen_heir
				set_leader_flag = appointed_heir
			}
			heir_setup_ad = yes
		}
		ai_chance = {
			factor = 1
		}
	}

	option = {
		add_resource = { influence = -500 }
		name = usefulheirs.3110.heir_maybe_9
		trigger = {
			AND = {
				check_variable = { which = total_generals value >= 9 }
				NOT = { has_valid_civic = civic_adoptive_dynasties }
			}
		}
		hidden_effect = {
			event_target:heir_maybe_9 = {
				save_event_target_as = new_chosen_heir
				set_leader_flag = appointed_heir
			}
			heir_setup_non_ad = yes
		}
		ai_chance = {
			factor = 1
		}
	}
	option = {
		name = usefulheirs.3110.heir_maybe_9
		trigger = {
			AND = {
				check_variable = { which = total_generals value >= 9 }
				has_valid_civic = civic_adoptive_dynasties
			}
		}
		hidden_effect = {
			event_target:heir_maybe_9 = {
				save_event_target_as = new_chosen_heir
				set_leader_flag = appointed_heir
			}
			heir_setup_ad = yes
		}
		ai_chance = {
			factor = 1
		}
	}

	option = {
		add_resource = { influence = -500 }
		name = usefulheirs.3110.heir_maybe_10
		trigger = {
			AND = {
				check_variable = { which = total_generals value >= 10 }
				NOT = { has_valid_civic = civic_adoptive_dynasties }
			}
		}
		hidden_effect = {
			event_target:heir_maybe_10 = {
				save_event_target_as = new_chosen_heir
				set_leader_flag = appointed_heir
			}
			heir_setup_non_ad = yes
		}
		ai_chance = {
			factor = 1
		}
	}
	option = {
		name = usefulheirs.3110.heir_maybe_10
		trigger = {
			AND = {
				check_variable = { which = total_generals value >= 10 }
				has_valid_civic = civic_adoptive_dynasties
			}
		}
		hidden_effect = {
			event_target:heir_maybe_10 = {
				save_event_target_as = new_chosen_heir
				set_leader_flag = appointed_heir
			}
			heir_setup_ad = yes
		}
		ai_chance = {
			factor = 1
		}
	}
}

# Scientist
country_event = {
	id = usefulheirs.3140
	title = usefulheirs.3140.name
	desc = usefulheirs.3110.desc
	hide_window = no
	is_triggered_only = yes

	diplomatic = yes

	picture_event_data = {
		portrait = root.ruler
		planet_background = root.capital_scope
		graphical_culture = root.owner
		city_level = root.capital_scope
		room = root.ruler
	}

	# Nevermind
	option = {
		name = usefulheirs.3110.back
		ai_chance = {
			factor = 0.5
		}
	}

	option = {
		add_resource = { influence = -500 }
		name = usefulheirs.3110.heir_maybe_1
		trigger = {
			AND = {
				check_variable = { which = total_scientists value >= 1 }
				NOT = { has_valid_civic = civic_adoptive_dynasties }
			}
		}
		hidden_effect = {
			event_target:heir_maybe_1 = {
				save_event_target_as = new_chosen_heir
				set_leader_flag = appointed_heir
			}
			heir_setup_non_ad = yes
		}
		ai_chance = {
			factor = 1
		}
	}
	option = {
		name = usefulheirs.3110.heir_maybe_1
		trigger = {
			AND = {
				check_variable = { which = total_scientists value >= 1 }
				has_valid_civic = civic_adoptive_dynasties
			}
		}
		hidden_effect = {
			event_target:heir_maybe_1 = {
				save_event_target_as = new_chosen_heir
				set_leader_flag = appointed_heir
			}
			heir_setup_ad = yes
		}
		ai_chance = {
			factor = 1
		}
	}

	option = {
		add_resource = { influence = -500 }
		name = usefulheirs.3110.heir_maybe_2
		trigger = {
			AND = {
				check_variable = { which = total_scientists value >= 2 }
				NOT = { has_valid_civic = civic_adoptive_dynasties }
			}
		}
		hidden_effect = {
			event_target:heir_maybe_2 = {
				save_event_target_as = new_chosen_heir
				set_leader_flag = appointed_heir
			}
			heir_setup_non_ad = yes
		}
		ai_chance = {
			factor = 1
		}
	}
	option = {
		name = usefulheirs.3110.heir_maybe_2
		trigger = {
			AND = {
				check_variable = { which = total_scientists value >= 2 }
				has_valid_civic = civic_adoptive_dynasties
			}
		}
		hidden_effect = {
			event_target:heir_maybe_2 = {
				save_event_target_as = new_chosen_heir
				set_leader_flag = appointed_heir
			}
			heir_setup_ad = yes
		}
		ai_chance = {
			factor = 1
		}
	}

	option = {
		add_resource = { influence = -500 }
		name = usefulheirs.3110.heir_maybe_3
		trigger = {
			AND = {
				check_variable = { which = total_scientists value >= 3 }
				NOT = { has_valid_civic = civic_adoptive_dynasties }
			}
		}
		hidden_effect = {
			event_target:heir_maybe_3 = {
				save_event_target_as = new_chosen_heir
				set_leader_flag = appointed_heir
			}
			heir_setup_non_ad = yes
		}
		ai_chance = {
			factor = 1
		}
	}
	option = {
		name = usefulheirs.3110.heir_maybe_3
		trigger = {
			AND = {
				check_variable = { which = total_scientists value >= 3 }
				has_valid_civic = civic_adoptive_dynasties
			}
		}
		hidden_effect = {
			event_target:heir_maybe_3 = {
				save_event_target_as = new_chosen_heir
				set_leader_flag = appointed_heir
			}
			heir_setup_ad = yes
		}
		ai_chance = {
			factor = 1
		}
	}

	option = {
		add_resource = { influence = -500 }
		name = usefulheirs.3110.heir_maybe_4
		trigger = {
			AND = {
				check_variable = { which = total_scientists value >= 4 }
				NOT = { has_valid_civic = civic_adoptive_dynasties }
			}
		}
		hidden_effect = {
			event_target:heir_maybe_4 = {
				save_event_target_as = new_chosen_heir
				set_leader_flag = appointed_heir
			}
			heir_setup_non_ad = yes
		}
		ai_chance = {
			factor = 1
		}
	}
	option = {
		name = usefulheirs.3110.heir_maybe_4
		trigger = {
			AND = {
				check_variable = { which = total_scientists value >= 4 }
				has_valid_civic = civic_adoptive_dynasties
			}
		}
		hidden_effect = {
			event_target:heir_maybe_4 = {
				save_event_target_as = new_chosen_heir
				set_leader_flag = appointed_heir
			}
			heir_setup_ad = yes
		}
		ai_chance = {
			factor = 1
		}
	}

	option = {
		add_resource = { influence = -500 }
		name = usefulheirs.3110.heir_maybe_5
		trigger = {
			AND = {
				check_variable = { which = total_scientists value >= 5 }
				NOT = { has_valid_civic = civic_adoptive_dynasties }
			}
		}
		hidden_effect = {
			event_target:heir_maybe_5 = {
				save_event_target_as = new_chosen_heir
				set_leader_flag = appointed_heir
			}
			heir_setup_non_ad = yes
		}
		ai_chance = {
			factor = 1
		}
	}
	option = {
		name = usefulheirs.3110.heir_maybe_5
		trigger = {
			AND = {
				check_variable = { which = total_scientists value >= 5 }
				has_valid_civic = civic_adoptive_dynasties
			}
		}
		hidden_effect = {
			event_target:heir_maybe_5 = {
				save_event_target_as = new_chosen_heir
				set_leader_flag = appointed_heir
			}
			heir_setup_ad = yes
		}
		ai_chance = {
			factor = 1
		}
	}

	option = {
		add_resource = { influence = -500 }
		name = usefulheirs.3110.heir_maybe_6
		trigger = {
			AND = {
				check_variable = { which = total_scientists value >= 6 }
				NOT = { has_valid_civic = civic_adoptive_dynasties }
			}
		}
		hidden_effect = {
			event_target:heir_maybe_6 = {
				save_event_target_as = new_chosen_heir
				set_leader_flag = appointed_heir
			}
			heir_setup_non_ad = yes
		}
		ai_chance = {
			factor = 1
		}
	}
	option = {
		name = usefulheirs.3110.heir_maybe_6
		trigger = {
			AND = {
				check_variable = { which = total_scientists value >= 6 }
				has_valid_civic = civic_adoptive_dynasties
			}
		}
		hidden_effect = {
			event_target:heir_maybe_6 = {
				save_event_target_as = new_chosen_heir
				set_leader_flag = appointed_heir
			}
			heir_setup_ad = yes
		}
		ai_chance = {
			factor = 1
		}
	}

	option = {
		add_resource = { influence = -500 }
		name = usefulheirs.3110.heir_maybe_7
		trigger = {
			AND = {
				check_variable = { which = total_scientists value >= 7 }
				NOT = { has_valid_civic = civic_adoptive_dynasties }
			}
		}
		hidden_effect = {
			event_target:heir_maybe_7 = {
				save_event_target_as = new_chosen_heir
				set_leader_flag = appointed_heir
			}
			heir_setup_non_ad = yes
		}
		ai_chance = {
			factor = 1
		}
	}
	option = {
		name = usefulheirs.3110.heir_maybe_7
		trigger = {
			AND = {
				check_variable = { which = total_scientists value >= 7 }
				has_valid_civic = civic_adoptive_dynasties
			}
		}
		hidden_effect = {
			event_target:heir_maybe_7 = {
				save_event_target_as = new_chosen_heir
				set_leader_flag = appointed_heir
			}
			heir_setup_ad = yes
		}
		ai_chance = {
			factor = 1
		}
	}

	option = {
		add_resource = { influence = -500 }
		name = usefulheirs.3110.heir_maybe_8
		trigger = {
			AND = {
				check_variable = { which = total_scientists value >= 8 }
				NOT = { has_valid_civic = civic_adoptive_dynasties }
			}
		}
		hidden_effect = {
			event_target:heir_maybe_8 = {
				save_event_target_as = new_chosen_heir
				set_leader_flag = appointed_heir
			}
			heir_setup_non_ad = yes
		}
		ai_chance = {
			factor = 1
		}
	}
	option = {
		name = usefulheirs.3110.heir_maybe_8
		trigger = {
			AND = {
				check_variable = { which = total_scientists value >= 8 }
				has_valid_civic = civic_adoptive_dynasties
			}
		}
		hidden_effect = {
			event_target:heir_maybe_8 = {
				save_event_target_as = new_chosen_heir
				set_leader_flag = appointed_heir
			}
			heir_setup_ad = yes
		}
		ai_chance = {
			factor = 1
		}
	}

	option = {
		add_resource = { influence = -500 }
		name = usefulheirs.3110.heir_maybe_9
		trigger = {
			AND = {
				check_variable = { which = total_scientists value >= 9 }
				NOT = { has_valid_civic = civic_adoptive_dynasties }
			}
		}
		hidden_effect = {
			event_target:heir_maybe_9 = {
				save_event_target_as = new_chosen_heir
				set_leader_flag = appointed_heir
			}
			heir_setup_non_ad = yes
		}
		ai_chance = {
			factor = 1
		}
	}
	option = {
		name = usefulheirs.3110.heir_maybe_9
		trigger = {
			AND = {
				check_variable = { which = total_scientists value >= 9 }
				has_valid_civic = civic_adoptive_dynasties
			}
		}
		hidden_effect = {
			event_target:heir_maybe_9 = {
				save_event_target_as = new_chosen_heir
				set_leader_flag = appointed_heir
			}
			heir_setup_ad = yes
		}
		ai_chance = {
			factor = 1
		}
	}

	option = {
		add_resource = { influence = -500 }
		name = usefulheirs.3110.heir_maybe_10
		trigger = {
			AND = {
				check_variable = { which = total_scientists value >= 10 }
				NOT = { has_valid_civic = civic_adoptive_dynasties }
			}
		}
		hidden_effect = {
			event_target:heir_maybe_10 = {
				save_event_target_as = new_chosen_heir
				set_leader_flag = appointed_heir
			}
			heir_setup_non_ad = yes
		}
		ai_chance = {
			factor = 1
		}
	}
	option = {
		name = usefulheirs.3110.heir_maybe_10
		trigger = {
			AND = {
				check_variable = { which = total_scientists value >= 10 }
				has_valid_civic = civic_adoptive_dynasties
			}
		}
		hidden_effect = {
			event_target:heir_maybe_10 = {
				save_event_target_as = new_chosen_heir
				set_leader_flag = appointed_heir
			}
			heir_setup_ad = yes
		}
		ai_chance = {
			factor = 1
		}
	}
}

#############################

# New Heir - Adopt Dynastic Name?
country_event = {
	id = usefulheirs.3500
	picture = GFX_evt_arena
	title = usefulheirs.3500.name
	desc = usefulheirs.3500.desc
	hide_window = no
	is_triggered_only = yes

	# No Name Change
	option = {
		name = usefulheirs.3500.no_name_change
		hidden_effect = {
			country_event = { id = usefulheirs.3501 }
		}
	}

	# Yes Name Change
	option = {
		name = usefulheirs.3500.yes_name_change
		custom_tooltip = usefulheirs.3500.yes_name_change.tooltip
		hidden_effect = {
			heir = {
				set_name = "[heir.GetName] [ruler.GetSecondName]"
			}
			country_event = { id = usefulheirs.3501 }
		}
	}
}

# New Heir Proclaimed
country_event = {
	id = usefulheirs.3501
	picture = GFX_evt_coronation
	title = usefulheirs.3501.name
	hide_window = no
	is_triggered_only = yes

	trigger = {
		NOT = { has_country_flag = no_prior_heir }
	}

	desc = {
		text = usefulheirs.3501.desc
		trigger = {
			OR = {
				event_target:disinherited_heir_first = { has_leader_flag = appointed_heir }
				NOT = { has_valid_civic = civic_adoptive_dynasties }
			}
		}
	}
	desc = {
		text = usefulheirs.3501.ad.desc
		trigger = {
			NOT = { event_target:disinherited_heir_first = { has_leader_flag = appointed_heir } }
			has_valid_civic = civic_adoptive_dynasties
		}
	}

	# No Adoptive Dynasties
	option = {
		name = response_they_shall_accept
		trigger = { NOT = { has_valid_civic = civic_adoptive_dynasties } }
		hidden_effect = {
			every_owned_planet = {
				limit = {
					num_pops > 0
					is_capital = no
				}
				add_modifier = {
					modifier = chose_new_heir
					days = 720
				}
			}
			capital_scope = {
				add_modifier = {
					modifier = chose_new_heir_capital
					days = 2520
				}
			}
			if = {
				limit = {
					any_owned_leader = {
						has_leader_flag = previor_heir_clone_dummy
					}
				}
				random_owned_leader = {
					limit = {
						has_leader_flag = previor_heir_clone_dummy
					}
					kill_leader = { show_notification = no }
				}
			}
			if = {
				limit = {
					has_global_flag = civil_wars_active
				}
				if = {
					limit = {
						exists = event_target:disinherited_heir_first
					}
					event_target:disinherited_heir_first = {
						set_leader_flag = dead_ruler
						kill_leader = { show_notification = no }
					}
				}
				country_event = { id = civheir.1000 }
			}
		}
	}

	# Adoptive Dynasties
	option = {
		name = response_excellent
		trigger = { has_valid_civic = civic_adoptive_dynasties }
		hidden_effect = {
			if = {
				limit = {
					any_owned_leader = {
						has_leader_flag = previor_heir_clone_dummy
					}
				}
				random_owned_leader = {
					limit = {
						has_leader_flag = previor_heir_clone_dummy
					}
					kill_leader = { show_notification = no }
				}
			}
			if = {
				limit = {
					has_global_flag = civil_wars_active
				}
				if = {
					limit = {
						exists = event_target:disinherited_heir_first
					}
					event_target:disinherited_heir_first = {
						set_leader_flag = dead_ruler
						kill_leader = { show_notification = no }
					}
				}
				country_event = { id = civheir.1000 }
			}
		}
	}
}

# Dead Ruler - Get Name if Adoptive Dynasties and Non-Designated ruler takes over
country_event = {
	id = usefulheirs.3800
	hide_window = yes
	is_triggered_only = yes

	trigger = {
		from = {
			leader_class = ruler
			NOT = { has_leader_flag = dead_ruler }
		}
		has_civic = civic_adoptive_dynasties
		heir = {
			NOT = {
				has_leader_flag = appointed_heir
			}
		}
	}

	immediate = {
		from = {
			save_event_target_as = deceased_ruler
		}
		clone_leader = {
			target = event_target:deceased_ruler
			effect = {
				set_leader_flag = dead_ruler
				save_event_target_as = deceased_ruler
			}
		}
		country_event = { id = usefulheirs.3900 days = 7 }
	}
}

# Dead Designated Heir - Initializer
country_event = {
	id = usefulheirs.3850
	hide_window = yes
	is_triggered_only = yes

	trigger = {
		from = { has_leader_flag = appointed_heir }
		has_civic = civic_adoptive_dynasties
	}

	immediate = {
		from = {
			save_event_target_as = deceased_heir
		}
		clone_leader = {
			target = event_target:deceased_heir
			effect = {
				save_event_target_as = deceased_heir
			}
		}
		country_event = { id = usefulheirs.3950 }
	}
}

# New Non-Designated Ruler
country_event = {
	id = usefulheirs.3900
	picture = GFX_evt_news_room
	title = usefulheirs.3900.name
	desc = usefulheirs.3900.desc
	hide_window = no
	is_triggered_only = yes

	option = {
		name = usefulheirs.3900.a
		hidden_effect = {
			every_owned_planet = {
				limit = {
					num_pops > 0
					is_capital = no
				}
				add_modifier = {
					modifier = dynastic_heir
					days = 3600
				}
			}
			capital_scope = {
				add_modifier = {
					modifier = dynastic_heir_capital
					days = 3600
				}
			}
			event_target:deceased_ruler = {
				kill_leader = { show_notification = no }
			}
		}
	}
}

# Designated Heir Dies - Notification
country_event = {
	id = usefulheirs.3950
	picture = GFX_evt_space_funeral
	title = usefulheirs.3950.name
	desc = usefulheirs.3950.desc
	hide_window = no
	is_triggered_only = yes

	option = {
		name = usefulheirs.3950.a
		hidden_effect = {
			event_target:deceased_heir = {
				kill_leader = { show_notification = no }
			}
		}
	}
}

#############################

# Abdicate the Throne
country_event = {
	id = usefulheirs.4000
	title = usefulheirs.4000.name
	desc = usefulheirs.4000.desc
	hide_window = no
	is_triggered_only = yes

	diplomatic = yes

	picture_event_data = {
		portrait = event_target:heir_leader
		planet_background = root.owner
		graphical_culture = root.owner
		city_level = root.owner
		room = root.owner
	}

	# Nevermind
	option = {
		name = usefulheirs.4000.a
		trigger = {
			is_ai = no
		}
	}

	# I am sure. I intend to retire.
	option = {
		name = usefulheirs.4000.b
		trigger = {
			is_ai = no
		}
		custom_tooltip = usefulheirs.4000.b.tooltip
		hidden_effect = {
			ruler = { kill_leader = { show_notification = no } }
		}
	}

	# I am sure. However, I still plan to contribute.
	option = {
		name = usefulheirs.4000.c
		trigger = {
			is_ai = no
		}
		custom_tooltip = usefulheirs.4000.c.tooltip
		hidden_effect = { country_event = { id = usefulheirs.4010 } }
	}

	# AI Option
	option = {
		name = usefulheirs.2000.AI
		trigger = {
			is_ai = yes
		}
		ai_chance = {
			factor = 1
		}
		random_list = {
			# Abdicate and Retire
			75 = {
				hidden_effect = {
					ruler = { kill_leader = { show_notification = no } }
				}
			}
			# Abdicate and become a leader
			25 = {
				hidden_effect = { country_event = { id = usefulheirs.4010 } }
			}
		}
	}
}

# Decide to become another leader type
country_event = {
	id = usefulheirs.4010
	title = usefulheirs.4010.name
	desc = usefulheirs.4010.desc
	hide_window = no
	is_triggered_only = yes

	diplomatic = yes

	picture_event_data = {
		portrait = event_target:heir_leader
		planet_background = root.owner
		graphical_culture = root.owner
		city_level = root.owner
		room = root.owner
	}

	# Governor
	option = {
		name = usefulheirs.4010.a
		trigger = {
			is_ai = no
		}
		hidden_effect = { country_event = { id = usefulheirs.4011 } }
	}

	# Admiral
	option = {
		name = usefulheirs.4010.b
		trigger = {
			is_ai = no
		}
		hidden_effect = { country_event = { id = usefulheirs.4012 } }
	}

	# General
	option = {
		name = usefulheirs.4010.c
		trigger = {
			is_ai = no
		}
		hidden_effect = { country_event = { id = usefulheirs.4013 } }
	}

	# Scientist
	option = {
		name = usefulheirs.4010.d
		trigger = {
			is_ai = no
		}
		hidden_effect = { country_event = { id = usefulheirs.4014 } }
	}

	# AI Option
	option = {
		name = usefulheirs.2000.AI
		trigger = {
			is_ai = yes
		}
		ai_chance = {
			factor = 1
		}
		random_list = {
			# Governor
			71 = {
				hidden_effect = { country_event = { id = usefulheirs.4011 } }
			}
			# Admiral
			21 = {
				hidden_effect = { country_event = { id = usefulheirs.4012 } }
			}
			# General
			3 = {
				hidden_effect = { country_event = { id = usefulheirs.4013 } }
			}
			# Scientist
			1 = {
				hidden_effect = { country_event = { id = usefulheirs.4014 } }
			}
		}
	}
}

# Make Ruler Governor
country_event = {
	id = usefulheirs.4011
	hide_window = yes
	is_triggered_only = yes

	immediate = {

		ruler = {
			save_event_target_as = old_ruler
		}

		heir = {
			save_event_target_as = new_ruler
			set_leader_flag = new_ruler_via_abdication
		}

		clone_leader = {
			target = event_target:old_ruler
			class = governor
		}

		last_created_leader = {
			set_leader_flag = abdicated_ruler
			save_event_target_as = abdicated_ruler_new
			if = {
				limit = {
					OR = {
						has_trait = leader_trait_strategist
						has_trait = leader_trait_general_strategist
						has_trait = trait_strategist2
						has_trait = leader_trait_general_strategist2
						has_trait = leader_trait_strategist3
						has_trait = leader_trait_general_strategist3
						has_trait = leader_trait_strategist4
						has_trait = leader_trait_general_strategist4
						has_trait = leader_trait_nonstrategist
						has_trait = leader_trait_general_nonstrategist
						has_trait = leader_trait_nonstrategist2
						has_trait = leader_trait_general_nonstrategist2
						has_trait = leader_trait_nonstrategist3
						has_trait = leader_trait_general_nonstrategist3
						has_trait = leader_trait_nonstrategist4
						has_trait = leader_trait_general_nonstrategist4
						has_trait = leader_trait_tactician
						has_trait = leader_trait_general_tactician
						has_trait = leader_trait_tactician2
						has_trait = leader_trait_general_tactician2
						has_trait = leader_trait_tactician3
						has_trait = leader_trait_general_tactician3
						has_trait = leader_trait_tactician4
						has_trait = leader_trait_general_tactician4
						has_trait = leader_trait_nontactician
						has_trait = leader_trait_general_nontactician
						has_trait = leader_trait_nontactician2
						has_trait = leader_trait_general_nontactician2
						has_trait = leader_trait_nontactician3
						has_trait = leader_trait_general_nontactician3
						has_trait = leader_trait_nontactician4
						has_trait = leader_trait_general_nontactician4
						has_trait = leader_trait_general_nontactician4
						has_trait = leader_trait_general_nontactician4
					}
				}
				remove_trait = leader_trait_strategist
				remove_trait = leader_trait_general_strategist
				remove_trait = leader_trait_strategist2
				remove_trait = leader_trait_general_strategist2
				remove_trait = leader_trait_strategist3
				remove_trait = leader_trait_general_strategist3
				remove_trait = leader_trait_strategist4
				remove_trait = leader_trait_general_strategist4
				remove_trait = leader_trait_nonstrategist
				remove_trait = leader_trait_general_nonstrategist
				remove_trait = leader_trait_nonstrategist2
				remove_trait = leader_trait_general_nonstrategist2
				remove_trait = leader_trait_nonstrategist3
				remove_trait = leader_trait_general_nonstrategist3
				remove_trait = leader_trait_nonstrategist4
				remove_trait = leader_trait_general_nonstrategist4
				remove_trait = leader_trait_tactician
				remove_trait = leader_trait_general_tactician
				remove_trait = leader_trait_tactician2
				remove_trait = leader_trait_general_tactician2
				remove_trait = leader_trait_tactician3
				remove_trait = leader_trait_general_tactician3
				remove_trait = leader_trait_tactician4
				remove_trait = leader_trait_general_tactician4
				remove_trait = leader_trait_nontactician
				remove_trait = leader_trait_general_nontactician
				remove_trait = leader_trait_nontactician2
				remove_trait = leader_trait_general_nontactician2
				remove_trait = leader_trait_nontactician3
				remove_trait = leader_trait_general_nontactician3
				remove_trait = leader_trait_nontactician4
				remove_trait = leader_trait_general_nontactician4
				remove_trait = leader_trait_general_nontactician4
				remove_trait = leader_trait_general_nontactician4
			}
		}

		# Enhanced Traits
		country_event = { id = heirtraits.517 }
		country_event = { id = heirtraits.518 }
		country_event = { id = heirtraits.519 }
		country_event = { id = heirtraits.520 }
		country_event = { id = heirtraits.521 }
		country_event = { id = heirtraits.522 }
		country_event = { id = heirtraits.523 }
		country_event = { id = heirtraits.524 }

		ruler = { kill_leader = { show_notification = no } }
	}
}

# Make Ruler Admiral
country_event = {
	id = usefulheirs.4012
	hide_window = yes
	is_triggered_only = yes

	immediate = {

		ruler = {
			save_event_target_as = old_ruler
		}

		heir = {
			save_event_target_as = new_ruler
			set_leader_flag = new_ruler_via_abdication
		}

		clone_leader = {
			target = event_target:old_ruler
			class = admiral
		}

		last_created_leader = {
			set_leader_flag = abdicated_ruler
			save_event_target_as = abdicated_ruler_new
			if = {
				limit = {
					OR = {
						has_trait = leader_trait_general_strategist
						has_trait = leader_trait_general_strategist2
						has_trait = leader_trait_general_strategist3
						has_trait = leader_trait_general_strategist4
						has_trait = leader_trait_general_nonstrategist
						has_trait = leader_trait_general_nonstrategist2
						has_trait = leader_trait_general_nonstrategist3
						has_trait = leader_trait_general_nonstrategist4
						has_trait = leader_trait_general_tactician
						has_trait = leader_trait_general_tactician2
						has_trait = leader_trait_general_tactician3
						has_trait = leader_trait_general_tactician4
						has_trait = leader_trait_general_nontactician
						has_trait = leader_trait_general_nontactician2
						has_trait = leader_trait_general_nontactician3
						has_trait = leader_trait_general_nontactician4
						has_trait = leader_trait_governors
						has_trait = leader_trait_governors2
						has_trait = leader_trait_governors3
						has_trait = leader_trait_governors4
						has_trait = leader_trait_nongovernors
						has_trait = leader_trait_nongovernors2
						has_trait = leader_trait_nongovernors3
						has_trait = leader_trait_nongovernors4
					}
				}
				remove_trait = leader_trait_general_strategist
				remove_trait = leader_trait_general_strategist2
				remove_trait = leader_trait_general_strategist3
				remove_trait = leader_trait_general_strategist4
				remove_trait = leader_trait_general_nonstrategist
				remove_trait = leader_trait_general_nonstrategist2
				remove_trait = leader_trait_general_nonstrategist3
				remove_trait = leader_trait_general_nonstrategist4
				remove_trait = leader_trait_general_tactician
				remove_trait = leader_trait_general_tactician2
				remove_trait = leader_trait_general_tactician3
				remove_trait = leader_trait_general_tactician4
				remove_trait = leader_trait_general_nontactician
				remove_trait = leader_trait_general_nontactician2
				remove_trait = leader_trait_general_nontactician3
				remove_trait = leader_trait_general_nontactician4
				remove_trait = leader_trait_governors
				remove_trait = leader_trait_governors2
				remove_trait = leader_trait_governors3
				remove_trait = leader_trait_governors4
				remove_trait = leader_trait_nongovernors
				remove_trait = leader_trait_nongovernors2
				remove_trait = leader_trait_nongovernors3
				remove_trait = leader_trait_nongovernors4
			}
		}

		# Enhanced Traits
		country_event = { id = heirtraits.51 }
		country_event = { id = heirtraits.52 }
		country_event = { id = heirtraits.53 }
		country_event = { id = heirtraits.54 }
		country_event = { id = heirtraits.55 }
		country_event = { id = heirtraits.56 }
		country_event = { id = heirtraits.57 }
		country_event = { id = heirtraits.58 }
		country_event = { id = heirtraits.59 }
		country_event = { id = heirtraits.510 }
		country_event = { id = heirtraits.511 }
		country_event = { id = heirtraits.512 }
		country_event = { id = heirtraits.513 }
		country_event = { id = heirtraits.514 }
		country_event = { id = heirtraits.515 }
		country_event = { id = heirtraits.516 }

		ruler = { kill_leader = { show_notification = no } }
	}
}

# Make Ruler General
country_event = {
	id = usefulheirs.4013
	hide_window = yes
	is_triggered_only = yes

	immediate = {

		ruler = {
			save_event_target_as = old_ruler
		}

		heir = {
			save_event_target_as = new_ruler
			set_leader_flag = new_ruler_via_abdication
		}

		clone_leader = {
			target = event_target:old_ruler
			class = general
		}

		last_created_leader = {
			set_leader_flag = abdicated_ruler
			save_event_target_as = abdicated_ruler_new
			if = {
				limit = {
					OR = {
						has_trait = leader_trait_strategist
						has_trait = leader_trait_strategist2
						has_trait = leader_trait_strategist3
						has_trait = leader_trait_strategist4
						has_trait = leader_trait_nonstrategist
						has_trait = leader_trait_nonstrategist2
						has_trait = leader_trait_nonstrategist3
						has_trait = leader_trait_nonstrategist4
						has_trait = leader_trait_tactician
						has_trait = leader_trait_tactician2
						has_trait = leader_trait_tactician3
						has_trait = leader_trait_tactician4
						has_trait = leader_trait_nontactician
						has_trait = leader_trait_nontactician2
						has_trait = leader_trait_nontactician3
						has_trait = leader_trait_nontactician4
						has_trait = leader_trait_governors
						has_trait = leader_trait_governors2
						has_trait = leader_trait_governors3
						has_trait = leader_trait_governors4
						has_trait = leader_trait_nongovernors
						has_trait = leader_trait_nongovernors2
						has_trait = leader_trait_nongovernors3
						has_trait = leader_trait_nongovernors4
					}
				}
				remove_trait = leader_trait_strategist
				remove_trait = leader_trait_strategist2
				remove_trait = leader_trait_strategist3
				remove_trait = leader_trait_strategist4
				remove_trait = leader_trait_nonstrategist
				remove_trait = leader_trait_nonstrategist2
				remove_trait = leader_trait_nonstrategist3
				remove_trait = leader_trait_nonstrategist4
				remove_trait = leader_trait_tactician
				remove_trait = leader_trait_tactician2
				remove_trait = leader_trait_tactician3
				remove_trait = leader_trait_tactician4
				remove_trait = leader_trait_nontactician
				remove_trait = leader_trait_nontactician2
				remove_trait = leader_trait_nontactician3
				remove_trait = leader_trait_nontactician4
				remove_trait = leader_trait_governors
				remove_trait = leader_trait_governors2
				remove_trait = leader_trait_governors3
				remove_trait = leader_trait_governors4
				remove_trait = leader_trait_nongovernors
				remove_trait = leader_trait_nongovernors2
				remove_trait = leader_trait_nongovernors3
				remove_trait = leader_trait_nongovernors4
			}
		}

		# Enhanced Traits
		country_event = { id = heirtraits.51 }
		country_event = { id = heirtraits.52 }
		country_event = { id = heirtraits.53 }
		country_event = { id = heirtraits.54 }
		country_event = { id = heirtraits.55 }
		country_event = { id = heirtraits.56 }
		country_event = { id = heirtraits.57 }
		country_event = { id = heirtraits.58 }
		country_event = { id = heirtraits.59 }
		country_event = { id = heirtraits.510 }
		country_event = { id = heirtraits.511 }
		country_event = { id = heirtraits.512 }
		country_event = { id = heirtraits.513 }
		country_event = { id = heirtraits.514 }
		country_event = { id = heirtraits.515 }
		country_event = { id = heirtraits.516 }

		ruler = { kill_leader = { show_notification = no } }
	}
}

# Make Ruler Scientist
country_event = {
	id = usefulheirs.4014
	hide_window = yes
	is_triggered_only = yes

	immediate = {

		ruler = {
			save_event_target_as = old_ruler
		}

		heir = {
			save_event_target_as = new_ruler
			set_leader_flag = new_ruler_via_abdication
		}

		clone_leader = {
			target = event_target:old_ruler
			class = scientist
			effect = {
				set_leader_flag = abdicated_ruler
				save_event_target_as = abdicated_ruler_new
				if = {
					limit = {
						OR = {
							has_trait = leader_trait_strategist
							has_trait = leader_trait_strategist2
							has_trait = leader_trait_strategist3
							has_trait = leader_trait_strategist4
							has_trait = leader_trait_nonstrategist
							has_trait = leader_trait_nonstrategist2
							has_trait = leader_trait_nonstrategist3
							has_trait = leader_trait_nonstrategist4
							has_trait = leader_trait_tactician
							has_trait = leader_trait_tactician2
							has_trait = leader_trait_tactician3
							has_trait = leader_trait_tactician4
							has_trait = leader_trait_nontactician
							has_trait = leader_trait_nontactician2
							has_trait = leader_trait_nontactician3
							has_trait = leader_trait_nontactician4
							has_trait = leader_trait_governors
							has_trait = leader_trait_governors2
							has_trait = leader_trait_governors3
							has_trait = leader_trait_governors4
							has_trait = leader_trait_nongovernors
							has_trait = leader_trait_nongovernors2
							has_trait = leader_trait_nongovernors3
							has_trait = leader_trait_nongovernors4
							has_trait = leader_trait_general_strategist
							has_trait = leader_trait_general_strategist2
							has_trait = leader_trait_general_strategist3
							has_trait = leader_trait_general_strategist4
							has_trait = leader_trait_general_nonstrategist
							has_trait = leader_trait_general_nonstrategist2
							has_trait = leader_trait_general_nonstrategist3
							has_trait = leader_trait_general_nonstrategist4
							has_trait = leader_trait_general_tactician
							has_trait = leader_trait_general_tactician2
							has_trait = leader_trait_general_tactician3
							has_trait = leader_trait_general_tactician4
							has_trait = leader_trait_general_nontactician
							has_trait = leader_trait_general_nontactician2
							has_trait = leader_trait_general_nontactician3
							has_trait = leader_trait_general_nontactician4
						}
					}
					remove_trait = leader_trait_strategist
					remove_trait = leader_trait_strategist2
					remove_trait = leader_trait_strategist3
					remove_trait = leader_trait_strategist4
					remove_trait = leader_trait_nonstrategist
					remove_trait = leader_trait_nonstrategist2
					remove_trait = leader_trait_nonstrategist3
					remove_trait = leader_trait_nonstrategist4
					remove_trait = leader_trait_tactician
					remove_trait = leader_trait_tactician2
					remove_trait = leader_trait_tactician3
					remove_trait = leader_trait_tactician4
					remove_trait = leader_trait_nontactician
					remove_trait = leader_trait_nontactician2
					remove_trait = leader_trait_nontactician3
					remove_trait = leader_trait_nontactician4
					remove_trait = leader_trait_governors
					remove_trait = leader_trait_governors2
					remove_trait = leader_trait_governors3
					remove_trait = leader_trait_governors4
					remove_trait = leader_trait_nongovernors
					remove_trait = leader_trait_nongovernors2
					remove_trait = leader_trait_nongovernors3
					remove_trait = leader_trait_nongovernors4
					remove_trait = leader_trait_general_strategist
					remove_trait = leader_trait_general_strategist2
					remove_trait = leader_trait_general_strategist3
					remove_trait = leader_trait_general_strategist4
					remove_trait = leader_trait_general_nonstrategist
					remove_trait = leader_trait_general_nonstrategist2
					remove_trait = leader_trait_general_nonstrategist3
					remove_trait = leader_trait_general_nonstrategist4
					remove_trait = leader_trait_general_tactician
					remove_trait = leader_trait_general_tactician2
					remove_trait = leader_trait_general_tactician3
					remove_trait = leader_trait_general_tactician4
					remove_trait = leader_trait_general_nontactician
					remove_trait = leader_trait_general_nontactician2
					remove_trait = leader_trait_general_nontactician3
					remove_trait = leader_trait_general_nontactician4
				}
			}
		}

		ruler = { kill_leader = { show_notification = no } }
	}
}

#############################

# AI Heir Leader event
country_event = {
	id = usefulheirs.9000
	hide_window = yes
	is_triggered_only = yes

	trigger = { 
		is_ai = yes
		exists = heir
		heir = {
			NOR = {
				has_leader_flag = clone_heir_governor
				has_leader_flag = clone_heir_admiral
				has_leader_flag = clone_heir_general
				has_leader_flag = clone_heir_scientist
			}
			NOR = {
				leader_class = governor
				leader_class = admiral
				leader_class = general
				leader_class = scientist
			}
		}
	}

	immediate = {
		heir = {
			save_event_target_as = heir_leader
		}
		country_event = { id = usefulheirs.2000 }
	}
}

# AI Abdication event
country_event = {
	id = usefulheirs.9001
	hide_window = yes
	is_triggered_only = yes

	trigger = { 
		is_ai = yes
		exists = heir
		is_at_war = no
		ruler = {
			NOT = {
				has_trait = leader_trait_ruler_chosen
			}
		}
	}

	immediate = {
		if = {
			limit = {
				ruler = {
					leader_age >= 70
					leader_age < 75
				}
			}
			random_list = {
				10 = {
					country_event = { id = usefulheirs.4000 }
				}
				90 = {

				}
			}
		}
		else_if = {
			limit = {
				ruler = {
					leader_age >= 75
					leader_age < 80
				}
			}
			random_list = {
				15 = {
					country_event = { id = usefulheirs.4000 }
				}
				85 = {

				}
			}
		}
		else_if = {
			limit = {
				ruler = {
					leader_age >= 80
					leader_age < 85
				}
			}
			random_list = {
				20 = {
					country_event = { id = usefulheirs.4000 }
				}
				80 = {

				}
			}
		}
		else_if = {
			limit = {
				ruler = {
					leader_age >= 85
					leader_age < 90
				}
			}
			random_list = {
				25 = {
					country_event = { id = usefulheirs.4000 }
				}
				75 = {

				}
			}
		}
		else_if = {
			limit = {
				ruler = {
					leader_age >= 90
					leader_age < 95
				}
			}
			random_list = {
				30 = {
					country_event = { id = usefulheirs.4000 }
				}
				70 = {

				}
			}
		}
		else_if = {
			limit = {
				ruler = {
					leader_age >= 95
					leader_age < 100
				}
			}
			random_list = {
				35 = {
					country_event = { id = usefulheirs.4000 }
				}
				65 = {

				}
			}
		}
		else_if = {
			limit = {
				ruler = {
					leader_age >= 100
					leader_age < 105
				}
			}
			random_list = {
				40 = {
					country_event = { id = usefulheirs.4000 }
				}
				60 = {

				}
			}
		}
		else_if = {
			limit = {
				ruler = {
					leader_age >= 105
				}
			}
			random_list = {
				45 = {
					country_event = { id = usefulheirs.4000 }
				}
				55 = {

				}
			}
		}
	}
}

# AI Designate Heir event
country_event = {
	id = usefulheirs.9002
	hide_window = yes
	is_triggered_only = yes

	trigger = { 
		is_ai = yes
		exists = heir
		has_valid_civic = civic_adoptive_dynasties
		heir = {
			NOT = { has_leader_flag = appointed_heir }
		}
	}

	immediate = {
		heir = {
			save_event_target_as = heir_leader
		}
		country_event = { id = usefulheirs.3000 }
	}
}

# AI Random Chance to Designate a leader as heir event event
country_event = {
	id = usefulheirs.9003
	hide_window = yes
	is_triggered_only = yes

	trigger = { 
		is_ai = yes
		exists = heir
	}

	immediate = {

		random_list = {
			# Nothing
			97 = { }
			# Heir Disinherited
			3 = {
				heir = { save_event_target_as = heir_leader }
				country_event = { id = usefulheirs.3000 }
			}
		}
	}
}

# Remove No prior heir flag
country_event = {
	id = usefulheirs.9004
	hide_window = yes
	is_triggered_only = yes

	trigger = {
		has_country_flag = no_prior_heir
	}

	immediate = {
		remove_country_flag = no_prior_heir
	}
}

country_event = { # Psionic Fix - Give heir correct trait
	id = usefulheirs.9500
	hide_window = yes
	is_triggered_only = yes

	trigger = {
		heir = {
			has_trait = leader_trait_ruler_psionic
			NOR = {
				has_trait = leader_trait_governor_psionic
				has_trait = leader_trait_admiral_psionic
				has_trait = leader_trait_general_psionic
				has_trait = leader_trait_scientist_psionic
			}
			OR = {
				has_leader_flag = clone_heir_governor
				has_leader_flag = clone_heir_admiral
				has_leader_flag = clone_heir_general
				has_leader_flag = clone_heir_scientist
			}
		}
	}

	immediate = {

		heir = {
			if = {
				limit = { has_leader_flag = clone_heir_governor }
				add_trait = leader_trait_governor_psionic
			}
			else_if = {
				limit = { has_leader_flag = clone_heir_admiral }
				add_trait = leader_trait_admiral_psionic
			}
			else_if = {
				limit = { has_leader_flag = clone_heir_general }
				add_trait = leader_trait_general_psionic
			}
			else_if = {
				limit = { has_leader_flag = clone_heir_scientist }
				add_trait = leader_trait_scientist_psionic
			}
		}
	}
}

country_event = { # Psionic Fix - Remove traits after switching jobs
	id = usefulheirs.9510
	hide_window = yes
	is_triggered_only = yes

	trigger = {
		heir = {
			OR = {
				AND = {
					has_trait = leader_trait_governor_psionic
					OR = {
						has_trait = leader_trait_admiral_psionic
						has_trait = leader_trait_general_psionic
						has_trait = leader_trait_scientist_psionic
					}
				}
				AND = {
					has_trait = leader_trait_admiral_psionic
					OR = {
						has_trait = leader_trait_governor_psionic
						has_trait = leader_trait_general_psionic
						has_trait = leader_trait_scientist_psionic
					}
				}
				AND = {
					has_trait = leader_trait_general_psionic
					OR = {
						has_trait = leader_trait_governor_psionic
						has_trait = leader_trait_admiral_psionic
						has_trait = leader_trait_scientist_psionic
					}
				}
				AND = {
					has_trait = leader_trait_scientist_psionic
					OR = {
						has_trait = leader_trait_governor_psionic
						has_trait = leader_trait_admiral_psionic
						has_trait = leader_trait_scientist_psionic
					}
				}
			}
		}
	}

	immediate = {

		heir = {
			if = {
				limit = { has_leader_flag = clone_heir_governor }
				if = {
					limit = {
						has_trait = leader_trait_admiral_psionic
					}
					remove_trait = leader_trait_admiral_psionic
				}
				if = {
					limit = {
						has_trait = leader_trait_general_psionic
					}
					remove_trait = leader_trait_general_psionic
				}
				if = {
					limit = {
						has_trait = leader_trait_scientist_psionic
					}
					remove_trait = leader_trait_scientist_psionic
				}
			}
			else_if = {
				limit = { has_leader_flag = clone_heir_admiral }
				if = {
					limit = {
						has_trait = leader_trait_governor_psionic
					}
					remove_trait = leader_trait_governor_psionic
				}
				if = {
					limit = {
						has_trait = leader_trait_general_psionic
					}
					remove_trait = leader_trait_general_psionic
				}
				if = {
					limit = {
						has_trait = leader_trait_scientist_psionic
					}
					remove_trait = leader_trait_scientist_psionic
				}
			}
			else_if = {
				limit = { has_leader_flag = clone_heir_general }
				if = {
					limit = {
						has_trait = leader_trait_admiral_psionic
					}
					remove_trait = leader_trait_admiral_psionic
				}
				if = {
					limit = {
						has_trait = leader_trait_governor_psionic
					}
					remove_trait = leader_trait_governor_psionic
				}
				if = {
					limit = {
						has_trait = leader_trait_scientist_psionic
					}
					remove_trait = leader_trait_scientist_psionic
				}
			}
			else_if = {
				limit = { has_leader_flag = clone_heir_scientist }
				if = {
					limit = {
						has_trait = leader_trait_admiral_psionic
					}
					remove_trait = leader_trait_admiral_psionic
				}
				if = {
					limit = {
						has_trait = leader_trait_general_psionic
					}
					remove_trait = leader_trait_general_psionic
				}
				if = {
					limit = {
						has_trait = leader_trait_governor_psionic
					}
					remove_trait = leader_trait_governor_psionic
				}
			}
		}
	}
}

# Set ruler name to white
country_event = {
	id = usefulheirs.9600
	hide_window = yes
	is_triggered_only = yes

	immediate = {
		ruler = {
			set_name = "ruler_name_white"
		}
	}
}

# Set Realistic Heir Ages
# country_event = {
# 	id = usefulheirs.9003
# 	hide_window = yes
# 	is_triggered_only = yes

# 	trigger = { 
# 		from = { leader_class = ruler }
# 		exists = heir
# 	}

# 	immediate = {
# 	}
# }
